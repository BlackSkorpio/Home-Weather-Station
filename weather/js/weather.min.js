/*! Home Weather Station weather.js
 *  Copyright  (c) 2015-2019 Bjarne Varoystrand - bjarne ○ kokensupport • com
 *  License: MIT
 *  @author Bjarne Varoystrand (@black_skorpio)
 *  @version 1.4.4
 *  @description Forked from the ShearSpire Media Weather Clock by Steven Estrella (https://www.shearspiremedia.com)
 *               First introduced here: https://css-tricks.com/how-i-built-a-gps-powered-weather-clock-with-my-old-iphone-4/
 *  http://varoystrand.se | http://kokensupport.com
**/
(function(){var ck=true;var bG=true;var b6=false;var N=true;var bW="YOUR_API_KEY_HERE";var cA="1.4.4";var a3="Home Weahter Station";var be=false;var D="CSL";var bt=0;var cF=(location.hostname=="oxygen.local"||location.hostname=="varoystrand.se");var av=(bt==1&&cF)||location.hash=="#"+D;var P="se";var ac="metric";var b5=document,bl=window;var ci,cj,br,bp,n,b4,a5,aW,cb,g,G,O,h,aN,ap,bs,ah,bk,cE,bz,cy,b3,u,ak,bI,b,ba,aO,cD,ai,X,aX,aP,ca,p,M,bj,Y,ct,b7,bV,cg,aC,bE,a0,C,aY,bR,o,L,a7,aq,cs,al,z,a9,I,bC,aT,ch,t,am,a1,bL,cB,E,ax,bh,b1,bd,bX,c,U,aK,bw,cm,x,a2,bM,cC,F,ay,bi,an,b8,H,aL,bn,au,bY,f,a6,bv,V,aa,ag,cz,a8,j,cd,aV,Z,d,aA,by,aF,bO,cw,R,bT,aR,a4;switch(P){case"se":bp=a3+" är en webbaserad applikation som är gjord för att fungera på allt från smarta klockor till datorn; eller din TV.<br />Aktuell version av "+a3+" är "+cA;br=a3+"<br />is now ready to go offline";cy="Läser in vädret";b3="GEO-location service är inte tillgänglig, försök igen senare.";ah="Vädret i Detalj";u="GPS: ";bs="Uppdaterades: ";cE="Kordinater: ";bR="Längd- och latitudkoordinater baseras på den IP-adress du har tilldelats av din operatör, <br /> och används av oss för att bestämma var du befinner dig.";ak="Min/Max temperatur idag: ";bI="Sikt: ";b="Sikt rapporteras i kilometer (km). Det definieras som det största avstånd vid vilket ett stort svart föremål kan ses och redovisas mot himlen. Sikt beräknas utifrån mätningar av ljusspridning och absorption av partiklar och gaser.";ba="Molntäcke: ";aO="Den totala molnmängden ska ange hur stor del av himlen som skymd av moln utan hänsyn till molnslag eller molnhöjd och rapporteras i procent, där 0% betyder molnfritt och 100% helt molntäckt himmel.";cD="Lufttryck: ";aq="Lufttrycket, även känt som atmosfärstryck, är kraften per enhetsarea som utövas på en yta av vikten av luft ovanför den ytan i atmosfären av en planet.<br />I de flesta fall är atmosfärstrycket nära approximerat av det hydrostatiska trycket som orsakas av luftens vikt över mätpunkten.";ai="Luftfuktighet: ";a7="Luftfuktighet är vattendammmassan i den totala massan av torr luft i en viss volym luft vid en viss temperatur. I huvudsak ju varmare luften är desto mer vatten kan luften innehålla.<br />Relativ luftfuktighet blir förhållandet med högsta absoluta luftfuktighet mot den aktuella absoluta fuktigheten, som är beroende av aktuell lufttemperatur.";X="Vindhastighet: ";al="Prognoserna för vindhastighet och riktning är medelvärdet av dessa vindar och lulls, mätt över 10 minuter i en höjd av 10 meter över havet. Gustarna under en 10-minutersperiod är typiskt 40% högre än den genomsnittliga vindhastigheten.";bz="Vindriktning: ";cs="Vindriktningen är baserad på sann nordlig orientering och är den riktning som vinden blåser från. Till exempel blåser en nordlig vind från norr mot söder.<br />Vindhastighet och riktning kan påverkas väsentligt av lokal miljö. Klippor och andra landskapsfunktioner kommer att påverka vindar nära stranden.";aX="Soluppgång: ";L="Klockslag när solen börjar gå upp.";aP="Solnedgång: ";o="Klockslag när solen börjar gå ner.";ca="Gyllene timmen: ";p="Morgonens gyllene timmen (mjukt ljus, bästa tiden för fotografering) slutar.";M="Kvällens gyllene timmen börjar";bj="Månen går upp: ";aY="Klockslag när månen börjar gå upp.";Y="Månen går ner: ";C="Klockslag när månen börjar gå ner.";bk="Beaufort Skalan: ";z="Beaufort vindskala mäter vindhastighet beroende på vindens påverkan på mark och hav. Även om systemet är gammalt (först utvecklat 1805 av Sir Francis Beaufort), förblir det ett mycket vanligt system för att mäta vindhastighet idag.";aT="Vindstyrka i beaufort: ";ch="Lugnt";t="Svag vind";am=t;a1="Måttlig vind";bL=a1;cB="Frisk vind";E=cB;ax="Hård vind";bh=ax;b1="Mycket hård vind";bd="Storm";bX="Svår storm";c="Orkan";U=c;aK=c;bw=c;cm=c;x=c;a2="Eller knappt tillräckligt för att ge styrfart.";bM="Or that in which a man-of-war, with all sail set, and clean full, would go in smooth water, from";ax="High wind, moderate gale, near gale";cC="Or that to which a well-conditioned man-of-war could just carry in chase, full and by";F="Eller det som hon knappt kunde bära när revat huvudstorsegel och drivs framåt.";ay="Or that which would reduce her to storm stay-sails.";bi="Eller det som ingen segelduk kunde klara av.";ap="Associerad varningsflagga: ";I="Icon legend";a9="Förklaring till vad de olika ikonerna representerar.";n="precis nu";b4="sekund";a5="minut";aW="timma";cb="dag";g="månad";G="år";O=" sedan";h="er";aN="r";b8=["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"];H=["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"];aL=["N","NNV","NV","VNV","V","VSV","SV","SSV","S","SSÖ","SÖ","ÖSÖ","Ö","ÖNÖ","NÖ","NNÖ","N"];break;default:bp=a3+" is a webbased weather app that is designed to be runned on everything from smart watches and computers, to big screen devices as your TV set.<br />Current version of  "+a3+" is "+cA;br=a3+" is now ready to go offline";cy="Getting weather";b3="IP address location service is unavailable.";ah="Weather Details";u="GPS: ";bs="Updated: ";cE="Location: ";bR="Length and latitude coordinates are based on the IP address assigned to you by your operator, <br /> and used by us to determine your location.";ak="Hourly Max | Min: ";bI="Visibility: ";b="Visual range is reported in miles (mi). It is defined as the greatest distance at which a large black object can be seen and recognized against the background sky. Visual range is calculated from measurements of light scattering and absorption by particles and gases.";ba="Overcast: ";aO="The total cloud amount should indicate how much of the sky is obscured by clouds without regard to cloud or cloud height and reported in percent, where 0% means cloudless and 100% completely clouded sky.";cD="Pressure: ";aq="Air pressure also known as atmospheric pressure is the force per unit area exerted on a surface by the weight of air above that surface in the atmosphere of a planet.<br />In most circumstances atmospheric pressure is closely approximated by the hydrostatic pressure caused by the weight of air above the measurement point.";ai="Humidity: ";a7="Humidity is the water vapor mass contained within the total mass of dry air inside a specified volume of air at a specific temperature. Essentially, the hotter the air is, the more water the air can contain.<br />Relative humidity becomes the ratio of highest absolute humidity against the current absolute humidity, which is dependent on current air temperature.";X="Winds: ";al="The forecasts of wind speed and direction are the average of these gusts and lulls, measured over a 10-minute period at a height of 10 metres above sea level. The gusts during any 10-minute period are typically 40% higher than the average wind speed.";bz="Wind direction: ";cs="The wind direction is based on true north orientation and is the direction the wind is blowing from. For example, a northerly wind is blowing from the north towards the south.<br />Wind speed and direction can be influenced significantly by the local environment. Cliffs and other landscape features will affect winds near the shore.";aX="Sunrise: ";L="Time when the sun begins to rise";aP="Sunset: ";o="Time when the sun begins to set";ca="Golden hour: ";p="morning golden hour (soft light, best time for photography) ends";M="evening golden hour starts";bj="Moon Rises: ";aY="Time when the moon begins to rise";Y="Moon Sets: ";C="Time when the moon begins to set";bk="Beaufort Scale: ";z="The Beaufort wind scale measures wind speed according to the impact the wind has on the land and sea. Although the system is old (first developed in 1805 by Sir Francis Beaufort), it remains a widely used system to measure wind speed today.";aT="Beaufort number: ";ch="Calm";t="Light air";am="Light breeze";a1="Gentle breeze";bL="Moderate breeze";cB="Fresh breeze";E="Strong breeze";ax="Moderate gale";bh="Fresh gale";b1="Strong gale";bd="Whole gale";bX="Storm";c="Hurricane";U=c;aK=c;bw=c;cm=c;x=c;a2="Or just sufficient to give steerage way.";bM="Or that in which a man-of-war, with all sail set, and clean full, would go in smooth water, from";ax="High wind, moderate gale, near gale";cC="Or that to which a well-conditioned man-of-war could just carry in chase, full and by";F="Or that which she could scarcely bear close-reefed main-topsail and reefed foresail.";ay="Or that which would reduce her to storm stay-sails.";bi="Or that which no canvas could withstand.";ap="Associated warning flag: ";I="Icon legend";a9="Explanation on what the different icons represents.";n="just now";b4="sec";a5="min";aW="hour";cb="day";g="month";G="year";O=" ago";h="s";aN="s";b8=["January","February","March","April","May","June","July","August","September","October","November","December"];H=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];aL=["N","NNW","NW","WNW","W","WSW","SW","SSW","S","SSE","SE","ESE","E","ENE","NE","NNE","N"]}switch(ac){case"metric":Z="°C";by="ms";aA="km";d="%";aF="bft";bO=" hPa";cw="%";R="eu";break;case"imperial":Z="°F";by="mph";aA="mi";d="%";aF="bft";bO=" hPa";cw="%";R="en";break;default:Z="°K";by="mph";aA="m";d="%";aF="bft";bO=" hPa";cw="%";R="en"}var ci=new Object();var cj=new Object();ci={dataDiv:"<span class='divider'>|</span>",wd_LB:"&#013;",svgPfx:'<svg class="svgIcon" role="img">',titlePfx:'<title style="white-space:pre-line;margin:0 10px 0 10px;">',titleSfx:"</title>",usePfx:'<use xlink:href="#',useSfx:'" /></svg>',sumPfx:"<summary>",sumSfx:"</summary>",spanPfx:"<span>",spanTxt:'<span class="dataText">',spanSfx:"</span>",timePfx:'<time class="dataText" datetime="',PfxEnd:'">',timeSfx:"</time>"};cj={useLocation:ci.svgPfx+ci.titlePfx+cE+ci.titleSfx+ci.usePfx+"location"+ci.useSfx,useSunRise:ci.svgPfx+ci.titlePfx+aX+ci.titleSfx+ci.usePfx+"sunrise"+ci.useSfx,useSunSet:ci.svgPfx+ci.titlePfx+aP+ci.titleSfx+ci.usePfx+"sunset"+ci.useSfx,useGoldenHour:ci.svgPfx+ci.titlePfx+ca+ci.titleSfx+ci.usePfx+"goldenhour"+ci.useSfx,useMoonRise:ci.svgPfx+ci.titlePfx+bj+ci.titleSfx+ci.usePfx+"moonrise"+ci.useSfx,useMoonSet:ci.svgPfx+ci.titlePfx+Y+ci.titleSfx+ci.usePfx+"moonset"+ci.useSfx,useHumidity:ci.svgPfx+ci.titlePfx+ai+ci.titleSfx+ci.usePfx+"humidity"+ci.useSfx,useWindspeed:ci.svgPfx+ci.titlePfx+X+ci.titleSfx+ci.usePfx+"windspeed"+ci.useSfx,usePressure:ci.svgPfx+ci.titlePfx+cD+ci.titleSfx+ci.usePfx+"pressure"+ci.useSfx,useTemprature:ci.svgPfx+ci.titlePfx+Z+ci.titleSfx+ci.usePfx+"temperatur"+ci.useSfx,useWindRose:ci.svgPfx+ci.titlePfx+bz+ci.titleSfx+ci.usePfx+"windirection"+ci.useSfx,useWeatherDude:'<svg class="getting" role="img">'+ci.titlePfx+cy+ci.titleSfx+ci.usePfx+"weatherDude"+ci.useSfx,useBeaufort:ci.svgPfx+ci.usePfx+"bf0"+ci.useSfx,useVisibility:ci.svgPfx+ci.titlePfx+bI+ci.titleSfx+ci.usePfx+"visibility"+ci.useSfx,useOvercast:ci.svgPfx+ci.titlePfx+ba+ci.titleSfx+ci.usePfx,useUpdated:ci.svgPfx+ci.titlePfx+bs+ci.titleSfx+ci.usePfx+"clock"+ci.useSfx,useLogosmall:ci.svgPfx+ci.titlePfx+a3+ci.titleSfx+ci.usePfx+"logosmall"+ci.useSfx};var aH,a,cf,bD,bo,ao,bg,bf,aI,cp,cn,b9,at,cx,bF,bZ,cc,bK,aQ,az,bB,J,w,q,af,ce,m;var aj="";var cr=0;var i=0;var l,bU,bx,T,bP,cu,b2,W,cl,aM,co,aZ,ar,ae,e,bb,S,r,K,k,bc,b0,aE,bm,B,A;bc=console;aE=" -=- ";b0="%c"+aE;bm="font:1.5em sans-serif; color:orange;";B="\n";A=B+"//-------------------------------------//"+B+B;b5.addEventListener("DOMContentLoaded",cv,false);function cv(){var cG=bl.location.href;if(cG.indexOf("localhost:")>=0||cG.indexOf("file:")>=0){ck=false}if(N){var cH=new XMLHttpRequest();cH.open("GET","img/sprite.svg",true);cH.send();cH.onload=function(cJ){var cI=b5.createElement("div");cI.className="svgSprite";cI.innerHTML=cH.responseText;b5.body.insertBefore(cI,b5.body.childNodes[0])}}b5.getElementsByTagName("html")[0].setAttribute("lang",P);aH=b5.querySelector("main");a=b5.getElementById("container");cf=b5.getElementById("svgValues");bo=b5.getElementById("date");ao=b5.getElementById("time");bg=b5.getElementById("updateTime");w=b5.getElementById("weather");aI=b5.getElementById("details");cp=b5.getElementById("detailsHeader");bf=b5.getElementById("weatherdetails");az=b5.getElementById("gps");af=b5.getElementById("beaufort");cn=b5.getElementById("modal");q=b5.getElementById("icon");l=b5.getElementById("cloudlayer");bU=b5.getElementById("rainlayer");bx=b5.getElementById("rainwindow");T=b5.getElementById("snowlayer");bP=b5.getElementById("sunlayer");cu=b5.getElementById("clearnightlayer");b2=b5.getElementById("shooting");W=b5.getElementById("moonOrbit");cl=b5.getElementById("mistlayer");bB=b5.getElementById("gpsbutton");bB.addEventListener("click",bJ,false);m=cq(0,14);bJ();v();bN();setInterval(v,1000)}function bN(){if(av){bc.trace("Tracing wd_core")}var cN,cO,cJ,cP,cH,cK,cG,cM,cI;cO=1;cJ="varoystrand.se";cP=(cO==1||location.hostname==cJ);cN="By Baldurs Photography";cH=ci.svgPfx;cK=ci.titlePfx;cG=ci.titleSfx;cM=ci.usePfx;cI=ci.useSfx;b5.title=a3+" "+cN;var cL=function(){var cU,cX,cS,c2,cV,cZ,c1,cR,cW,c0,cY,cQ,cT;cS="#buildlink";cV=b5.getElementById("buildlink");cR=b5.getElementById("ribbonwrapp");c2=b5.querySelectorAll(cS);cU=aM?"Night":"Day";cX=aM?"#000":"var(--db)";cY="//github.com/BlackSkorpio/Home-Weather-Station";cZ="window.open(this.href);return false;";c1="nofollow";cW=ci.titlePfx+"Fork "+a3+" on GitHub"+ci.titleSfx;c0="<style>#f_s1{--stateClr:"+cX+"}</style>";cQ=cj.useLogosmall;cT=ci.svgPfx+cW+c0+ci.usePfx+"ribbon"+ci.useSfx;c2.forEach(function(c3){return c3.setAttribute("href",cY),c3.setAttribute("onclick",cZ),c3.setAttribute("rel",c1)});cV.setAttribute("title",a3+" "+cA);cV.innerHTML=cQ;cR.innerHTML=cT;if(cP!=1){cR.remove()}if(av){bc.groupCollapsed(b0+"wd_core => toGitHub"+aE,bm);bc.debug("RunOnce: "+be+B+"dayState: "+cU+B+"stateClr: "+cX+A);bc.groupEnd();bc.trace("Tracing toGitHub")}};cL()}function v(){var cI=bS();bo.innerHTML=cI.datehtml;ao.innerHTML=cI.timehtml;bo.dateTime=bD.toISOString();ao.dateTime=bD.toISOString();var cH=bD.getSeconds();var cG=bD.getMinutes();if(b6&&cH===0){bH();if(cG%15===m){aB()}if(cG%5===0&&!bG){bJ()}}}function bS(){bD=new Date();var cN=bD.getFullYear();var cW=b8[bD.getMonth()];var cV=bD.getDate();var cT=H[bD.getDay()];var cJ=bD.getHours();var cR=bD.getMinutes();var cO=bD.getSeconds();var cM,cG,cL,cQ,cY,cP;cM='<span class="liveTime">';cG='<span class="hours">';cP='<span class="timeDiv">:</span>';cL='<span class="minutes">';cQ='<span class="seconds">';cY=ci.spanSfx;var cX=cR<10?"0"+cR:cR;var cS=cO<10?"0"+cO:cO;if(ac=="metric"){var cK=cJ<10?"0"+cJ:cJ;var cH=cT+" "+cV+" "+cW;var cI=cM;cI+=cG;cI+=cK;cI+=cY;cI+=cP;cI+=cL;cI+=cX;cI+=cY;cI+=cQ;cI+=cS;cI+=cY;cI+=cY}else{var cU=cJ<12?"AM":"PM";var cK=cJ>12?cJ-12:cJ;if(cJ===0){cK=12}var cH=cT+", "+cW+" "+cV;var cI=cM;cI+=cG;cI+=cK;cI+=cY;cI+=cP;cI+=cL;cI+=cX;cI+=cY;cI+=cQ;cI+=cS+" "+cU;cI+=cY;cI+=cY}return{datehtml:cH,timehtml:cI}}function bJ(){if(av){bc.trace("Tracing getLocation")}if(bG){bu()}else{aJ()}}function aJ(){if(av){bc.trace("Tracing getGPSLocation")}if(navigator.geolocation){navigator.geolocation.getCurrentPosition(aU,ab)}else{az.innerHTML=b3;b6=false}}function bu(){if(av){bc.trace("Tracing getIPLocation")}var cG=new XMLHttpRequest();var cH;cG.onreadystatechange=function(){if(!b6){if(this.readyState===4){var cI=JSON.parse(cG.responseText);var cJ=true;if(this.status===200&&cJ){if(cI.status==="success"){cc=Number(cI.lat);bK=Number(cI.lon);aj=cI.city;aQ=cI.region;cH=cI.countryCode;bB.style.display="none";aS()}else{bB.style.display="block";bG=false}}else{bB.style.display="block";bG=false}}}};cG.open("GET","https://extreme-ip-lookup.com/json/",true);cG.send()}function ab(){if(av){bc.trace("Tracing geoError")}az.innerHTML=b3}function aU(cG){if(av){bc.trace("Tracing gpsPosition")}bB.style.display="none";cc=cG.coords.latitude;bK=cG.coords.longitude;az.innerHTML=aj+" ("+cc.toFixed(2)+" | "+bK.toFixed(2)+")";aS()}function aS(){if(av){bc.trace("Tracing showPosition")}var cG="lat="+cc+"&lon="+bK;if(ck){J="weather.php?"+cG+"&lang="+P+"&units="+ac}else{J="https://api.openweathermap.org/data/2.5/weather?";J+=cG+"&lang="+P+"&units="+ac+"&APPID="+bW}if(!b6){aB();b6=true}}function aB(){if(av){bc.trace("Tracing getWeather")}w.innerHTML=cy+"<br />"+cj.useWeatherDude;var cG=new XMLHttpRequest();if(ck){cG.responseType="document"}else{cG.responseType="text"}cG.onreadystatechange=function(){if(this.readyState===4&&this.status===200){var cH=ck?cG.response.body.textContent:cG.responseText;ce=JSON.parse(cH);s(ce)}};cG.open("GET",J,true);cG.send()}function s(dj){aj=dj.name;var c9=dj.sys.country;var df=dj.main.pressure;var c0=df/10;var di=dj.visibility/1000;var c1=dj.visibility*0.0006213712;switch(ac){case"metric":cd=di.toFixed(1);aV=+dj.main.temp.toFixed(1);break;case"imperial":cd=c1.toFixed(2);aV=+dj.main.temp.toFixed(2);break;default:cd=dj.visibility;aV=dj.main.temp}var cT,dl,c8,dk,cU,dp,cZ,dd,db,c3,cH,cS,dh,dn,c4,cY,dm,cV,da,c2,cK;var cT=new Date(dj.sys.sunrise*1000);var c8=new Date();var dl=new Date(dj.sys.sunset*1000);var dk=cT.getHours();var cZ=c8.getHours();var c3=dl.getHours();var cU=cT.getMinutes();var dp=cU<10?"0"+cU:cU;var dd=c8.getMinutes();var db=dd<10?"0"+dd:dd;var cH=dl.getMinutes();var cS=cH<10?"0"+cH:cH;var dh=dk+"."+dp;var dn=cZ+"."+db;var c4=c3+"."+cS;var cY=c4-dn;var dm=c4-dh;var da=cY.toFixed(2)/dm.toFixed(2)*100;var c2=da>100?99.99:da;var cK=(24-dm)*60;var cO=100-Number(dj.clouds.all);var c5=cY>=0;aw(dj);bq(dj,bT);var dg=c5?"day":"night";var cR=c5?"overcastDay":"overcastNight";var cI=":root{";cI+="--hPa:"+c0+"deg;";cI+="--windeg:"+dj.wind.deg+"deg;";cI+="--sunPosition:"+c2.toFixed(2)+"%;";cI+='--window:url("../img/window-'+dg+'.jpg");';cI+="--moontime:"+cK+"s;";cI+="--tempClr:"+bT+";";cI+="--bftclr:var(--bf"+bv+");";cI+="--bftSpeed:"+au+"s;";cI+="--windspeed-s:"+V+"s;";cI+="--windspeed-m:"+aa+"s;";cI+="--windspeed-f:"+ag+"s;";cI+="--moonBright:"+cO+"%;";cI+="}";cf.innerHTML=cI;cp.innerHTML=ah;var c7='<li id="wd_hilowtemp">';c7+=ci.spanTxt;c7+="Hourly Max | Min: ";c7+=dj.main.temp_max+Z;c7+=ci.dataDiv;c7+=dj.main.temp_min+Z;c7+=ci.spanSfx;var de='<li id="wd_location">';de+=cj.useLocation;de+='<span id="city">';de+=aj;de+=ci.spanSfx;de+='<span id="country">, (';de+=c9;de+=") ";de+=ci.spanSfx;de+=ci.spanPfx;de+='<a href="https://openweathermap.org/city/';de+=dj.id;de+='" title="">';de+=cc.toFixed(2);de+=ci.dataDiv;de+=bK.toFixed(2);de+="</a>";de+=ci.spanSfx;var dc='<li id="wd_pressure">';dc+=cj.usePressure;dc+=ci.spanTxt;dc+=dj.main.pressure;dc+=bO;dc+=ci.spanSfx;var cX='<li id="wd_humidity">';cX+=cj.useHumidity;cX+=ci.spanTxt;cX+=dj.main.humidity;cX+=cw;cX+=ci.spanSfx;var cL='<li id="wd_wind">';cL+=cj.useWindspeed;cL+=ci.spanTxt;cL+=dj.wind.speed;cL+=by;cL+=ci.spanSfx;var cN=ci.spanTxt;if(dj.wind.deg!=null){cN+=dj.wind.deg.toFixed(0);cN+="° ";cN+=Q(dj.wind.deg)}else{cN+="No data"}cN+=ci.spanSfx;var cG='<li id="wd_windir">';cG+=cj.useWindRose;cG+=cN;var cW='<li id="wd_sunrise">';cW+=cj.useSunRise;cW+=ci.spanTxt;cW+=new Date(dj.sys.sunrise*1000).toLocaleTimeString(R);cW+=ci.spanSfx;var cM='<li id="wd_sunset">';cM+=cj.useSunSet;cM+=ci.spanTxt;cM+=new Date(dj.sys.sunset*1000).toLocaleTimeString(R);cM+=ci.spanSfx;var cP='<li id="wd_visibility">';cP+=cj.useVisibility;cP+=ci.spanTxt;cP+=dj.visibility!=null?cd+aA:"No data";cP+=ci.spanSfx;var c6='<li id="wd_clouds">';c6+=cj.useOvercast+cR+ci.useSfx;c6+=ci.spanTxt;c6+=dj.clouds.all;c6+=d;c6+=ci.spanSfx;bf.innerHTML=cP+c6+cL+cG+dc+cX+cW+cM+de;var cQ=dj.weather[0];q.className="weather i-"+cQ.icon;q.style.opacity=1;q.innerHTML=ci.svgPfx+ci.usePfx+cQ.icon+ci.useSfx;var cJ=cj.useTemprature;cJ+=ci.spanTxt;cJ+=aV;cJ+=Z;cJ+=ci.spanSfx;cJ+=ci.spanTxt;cJ+=cQ.description;cJ+=ci.spanSfx;w.innerHTML=cJ;bH();ad(dj);bQ();y(dj);if(av){bc.group(b0+"processWeather"+aE,bm);bc.debug("RunOnce: "+be+B+"Weather id: "+cQ.id+B+"Visibility: "+dj.visibility+B+B+"TempRaw: "+dj.main.temp+B+"TempRaw fixed: "+ +dj.main.temp.toFixed(1)+B+"localtemperature: "+aV+B+B+"sunUpRaw: "+cT+B+"sunNowRaw: "+c8+B+"sunDownRaw: "+dl+B+B+"sunUp: "+dh+B+"sunNow: "+dn+B+"sunDown: "+c4+B+B+"sunLeft: "+c4+" - "+dn+" = "+cY.toFixed(2)+B+"sunHours: "+c4+" - "+dh+" = "+dm.toFixed(2)+B+"sunPosition: "+cY.toFixed(2)+" / "+dm.toFixed(2)+" * 100 = "+c2.toFixed(2)+B+"moonHours: (24 - "+dm+")  * 60 = "+cK+B+B+"isDay: "+c5+A);bc.groupEnd()}}function aw(cJ){var cL=cJ.wind.speed.toFixed(2);switch(ac){case"metric":bY=cL;break;case"imperial":bY=cL*0.44704;break;default:bY=cL}if(bY>=0&&bY<=0.29){a6=0;bC=a2+ci.wd_LB+ch}if(bY>=0.3&&bY<=1.59){a6=1;bC=t+ci.wd_LB+a2}if(bY>=1.6&&bY<=3.33){a6=2;bC=am+ci.wd_LB+a2}if(bY>=3.4&&bY<=5.49){a6=3;bC=a1+ci.wd_LB+a2}if(bY>=5.5&&bY<=7.99){a6=4;bC=bL+ci.wd_LB+a2}if(bY>=8&&bY<=10.79){a6=5;bC=cB+ci.wd_LB+cC}if(bY>=10.8&&bY<=13.89){a6=6;bC=E+ci.wd_LB+cC}if(bY>=13.9&&bY<=17.19){a6=7;bC=ax+ci.wd_LB+cC}if(bY>=17.2&&bY<=20.79){a6=8;bC=bh+ci.wd_LB+cC}if(bY>=20.8&&bY<=24.49){a6=9;bC=b1+ci.wd_LB+cC}if(bY>=24.5&&bY<=28.49){a6=10;bC=bd+ci.wd_LB+F}if(bY>=28.5&&bY<=32.69){a6=11;bC=bX+ci.wd_LB+ay}if(bY>=32.7&&bY<=36.99){a6=12;bC=c+ci.wd_LB+bi}if(bY>=37&&bY<=41.49){a6=13;bC=U+ci.wd_LB+bi}if(bY>=41.5&&bY<=46.19){a6=14;bC=aK+ci.wd_LB+bi}if(bY>=46.2&&bY<=50.99){a6=15;bC=bw+ci.wd_LB+bi}if(bY>=51&&bY<=56.09){a6=16;bC=cm+ci.wd_LB+bi}if(bY>=56.1&&bY<=61.2){a6=17;bC=x+ci.wd_LB+bi}if(a6>=0&&a6<=2){bv=0,V=75,aa=55,ag=35,au=10}if(a6>=3&&a6<=4){bv=1,V=65,aa=45,ag=35,au=5}if(a6>=5&&a6<=6){bv=2,V=60,aa=40,ag=30,au=4}if(a6>=7&&a6<=8){bv=3,V=55,aa=35,ag=25,au=3}if(a6>=9&&a6<=10){bv=4,V=45,aa=25,ag=15,au=2}if(a6>=11&&a6<=17){bv=5,V=35,aa=15,ag=5,au=1}if(bY>=10.8&&bY<=17.19){cz="gale1"}if(bY>=17.2&&bY<=24.49){cz="gale2"}if(bY>=24.5&&bY<=32.69){cz="storm1"}if(bY>=32.7&&bY<=61.2){cz="storm2"}if(bY>=10.8&&bY<=61.2){var cH=ap;var cG=ci.svgPfx;cG+=ci.titlePfx;cG+=cH;cG+=ci.titleSfx;cG+=ci.usePfx+cz;cG+=ci.useSfx}else{cG=""}var cI=aT+a6+aF+ci.wd_LB+bC;var cK=ci.svgPfx;cK+=ci.titlePfx;cK+=cI;cK+=ci.titleSfx;cK+=ci.usePfx+"bf0";cK+=ci.useSfx;af.className="windspeed i-"+a6+"bf";af.innerHTML=cK+cG;if(av){bc.groupCollapsed(b0+"wd_beaufort"+aE,bm);bc.debug("RunOnce: "+be+B+"wd_ws: "+bY+B+"wd_bf: "+a6+B+"bfSvgId: "+bv+B+"ws_s: "+V+B+"ws_m: "+aa+B+"ws_f: "+ag+B+"ws_bft: "+au+A);bc.groupEnd();bc.trace("Tracing wd_beaufort")}}function ad(dl){if(av){bc.trace("Tracing wd_modal")}var cU,c0,cR,cY,cG,cX,c9,cL,cH,cI,df,cW,c6,cS,c7,dk,cT,c4,di,c3,dd,dg,cM,c8;var cU=b5.querySelector("#modal");var c0=b5.querySelector("#modal-overlay");var cR=b5.querySelector("#close-button");var cK=b5.querySelector("#open-button");var cY="closed";var cG="aria-hidden";var cX="tabindex";var c9="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";var cL=b5.getElementById("Modal_Title");var cH=b5.getElementById("Modal_Description");var cI=b5.getElementById("dt_bft");var df=b5.getElementById("dt_windspeed");var cW=b5.getElementById("dt_windirection");var c6=b5.getElementById("dt_pressure");var cS=b5.getElementById("dt_humidity");var dk=b5.getElementById("dt_visibility");var c7=b5.getElementById("dt_cloudiness");var cT=b5.getElementById("dt_sunrise");var c4=b5.getElementById("dt_sunset");var di=b5.getElementById("dt_location");var c3=b5.getElementById("dt_moonrise");var dd=b5.getElementById("dt_moonset");var dg=b5.getElementById("dt_morningold");var cM=b5.getElementById("dt_eveningold");var c8=b5.getElementById("dt_builtby");var dh=ci.sumPfx;dh+=cj.useBeaufort+bk;dh+=ci.sumSfx;dh+=ci.spanPfx;dh+=z;dh+=ci.spanSfx;var db=ci.sumPfx;db+=cj.useWindspeed+X;db+=ci.sumSfx;db+=ci.spanPfx;db+=al;db+=ci.spanSfx;var dc=ci.sumPfx;dc+=cj.useWindRose+bz;dc+=ci.sumSfx;dc+=ci.spanPfx;dc+=cs;dc+=ci.spanSfx;var cQ=ci.sumPfx;cQ+=cj.usePressure+cD;cQ+=ci.sumSfx;cQ+=ci.spanPfx;cQ+=aq;cQ+=ci.spanSfx;var cV=ci.sumPfx;cV+=cj.useHumidity+ai;cV+=ci.sumSfx;cV+=ci.spanPfx;cV+=a7;cV+=ci.spanSfx;var c1=ci.sumPfx;c1+=cj.useVisibility+bI;c1+=ci.sumSfx;c1+=ci.spanPfx;c1+=b;c1+=ci.spanSfx;var cP=ci.sumPfx;cP+=cj.useOvercast+"overcastDay"+ci.useSfx+ba;cP+=ci.sumSfx;cP+=ci.spanPfx;cP+=aO;cP+=ci.spanSfx;var cN=ci.sumPfx;cN+=cj.useSunRise+aX;cN+=ci.sumSfx;cN+=ci.spanPfx;cN+=L;cN+=ci.spanSfx;var dm=ci.sumPfx;dm+=cj.useSunSet+aP;dm+=ci.sumSfx;dm+=ci.spanPfx;dm+=o;dm+=ci.spanSfx;var dj=ci.sumPfx;dj+=cj.useLocation+cE;dj+=ci.sumSfx;dj+=ci.spanPfx;dj+=bR;dj+=ci.spanSfx;var da=ci.sumPfx;da+=cj.useMoonRise+bj;da+=ci.sumSfx;da+=ci.spanPfx;da+=aY;da+=ci.spanSfx;var cZ=ci.sumPfx;cZ+=cj.useMoonSet+Y;cZ+=ci.sumSfx;cZ+=ci.spanPfx;cZ+=C;cZ+=ci.spanSfx;var cJ=ci.sumPfx;cJ+=cj.useGoldenHour+ca;cJ+=ci.sumSfx;cJ+=ci.spanPfx;cJ+=p;cJ+=ci.spanSfx;var c5=ci.sumPfx;c5+=cj.useGoldenHour+ca;c5+=ci.sumSfx;c5+=ci.spanPfx;c5+=M;c5+=ci.spanSfx;var c2=ci.sumPfx;c2+=cj.useLogosmall+a3;c2+=ci.sumSfx;c2+=ci.spanPfx;c2+=bp;c2+=ci.spanSfx;cL.innerHTML=I;cH.innerHTML=a9;cI.innerHTML=dh;df.innerHTML=db;cW.innerHTML=dc;c6.innerHTML=cQ;cS.innerHTML=cV;dk.innerHTML=c1;c7.innerHTML=cP;cT.innerHTML=cN;c4.innerHTML=dm;di.innerHTML=dj;c3.innerHTML=da;dd.innerHTML=cZ;dg.innerHTML=cJ;cM.innerHTML=c5;c8.innerHTML=c2;cK.setAttribute("title",a9);var cO=function(){cU.querySelector(c9).focus();c0.classList.remove(cY);cU.classList.remove(cY);var dn=aH.querySelectorAll(c9);dn.forEach(function(dp){return dp.setAttribute(cX,"-1")});cU.removeAttribute(cG);aH.setAttribute(cG,"true")};var de=function(){c0.classList.add(cY);cU.classList.add(cY);var dn=aH.querySelectorAll(c9);dn.forEach(function(dp){return dp.removeAttribute(cX)});cU.setAttribute(cG,"true");aH.removeAttribute(cG);cK.focus()};cK.addEventListener("click",function(){cO()});b5.addEventListener("keyup",function(dn){if(dn.keyCode===27&&cU.classList.contains(cY)!==true){de()}});[c0,cR].forEach(function(dn){dn.addEventListener("click",function(){de()})})}function bQ(){if(av){bc.trace("Tracing setLayers")}var cL="#details, #beaufort, #open-button";var cH=aH.querySelectorAll(cL);var cI="visible";var cK=b5.querySelector("#modal");var cJ="#dt_moonset, #dt_morningold, #dt_eveningold, #dt_moonrise";var cM=cK.querySelectorAll(cJ);var cG="hidden";cM.forEach(function(cN){return cN.classList.add(cG)});cH.forEach(function(cN){return cN.classList.add(cI)})}function bq(cK){var cJ,cI,cG,cL,cH;var cJ=Number(cK.main.temp.toFixed(1));var cG=cJ;var cL=(cJ-32)*5/9;var cH=cJ-273.15;switch(ac){case"metric":cI=cG;break;case"imperial":cI=cL;break;default:cI=cH}if(cI>=40.1){bT="rgb(43, 0, 1)"}if(cI>=30.1&&cI<=40){bT="rgb(107,  21,  39)"}if(cI>=25.1&&cI<=30){bT="rgb(195,  65, 114)"}if(cI>=20.1&&cI<=25){bT="rgb(231, 121,  97)"}if(cI>=15.1&&cI<=20){bT="rgb(236, 171,  77)"}if(cI>=10.1&&cI<=15){bT="rgb(237, 218,  69)"}if(cI>=5.1&&cI<=10){bT="rgb(195, 230,  77)"}if(cI>=0&&cI<=5){bT="rgb( 89, 188, 160)"}if(cI>=-5&&cI<=-0.1){bT="rgb( 77, 132, 203)"}if(cI>=-10&&cI<=-5.1){bT="rgb( 99,  92, 183)"}if(cI>=-15&&cI<=-10.1){bT="rgb( 54,  42, 118)"}if(cI>=-20&&cI<=-15.1){bT="rgb(154,  29, 154)"}if(cI>=-30&&cI<=-20.1){bT="rgb(255, 177, 255)"}if(cI>=-40&&cI<=-30.1){bT="rgb(239, 239, 239)"}if(cI<=-40.1){bT="rgb(0, 8, 101)"}if(av){bc.groupCollapsed(b0+"wd_tempScale"+aE,bm);bc.debug("RunOnce: "+be+B+"tempNow: "+cJ+B+"Metric: "+cG+"°C\nImperial: "+cL+"°F\nDefault: "+cH+"°K\ntempClr: "+bT+A);bc.groupEnd();bc.trace("Tracing wd_tempScale")}}function bA(c1){var cY,cT,cR,cJ,c0,cH,cU,cV,cP,cK,cX,cS,cW,cI,cQ,cM,cZ,cG,cN,cO,cL;var cY=new Date(c1.sys.sunrise*1000);var cR=new Date();var cT=new Date(c1.sys.sunset*1000);var cJ=cY.getHours();var cU=cR.getHours();var cK=cT.getHours();var c0=cY.getMinutes();var cH=c0<10?"0"+c0:c0;var cV=cR.getMinutes();var cP=cV<10?"0"+cV:cV;var cX=cT.getMinutes();var cS=cX<10?"0"+cX:cX;var cW=cJ+"."+cH;var cI=cU+"."+cP;var cQ=cK+"."+cS;var cM=cQ-cI;var cZ=cQ-cW;var cN=cM.toFixed(2)/cZ.toFixed(2)*100;var cL=(24-cZ)*60;if(av){bc.groupCollapsed(b0+"wd_sunPosition"+aE,bm);bc.debug("RunOnce: "+be+B+"sunUpRaw: "+cY+B+"sunNowRaw: "+cR+B+"sunDownRaw: "+cT+B+"sunUp: "+cW+B+"sunNow: "+cI+B+"sunDown: "+cQ+B+"sunLeft: "+cQ+" - "+cI+" = "+roundToTwo(cM)+B+"sunHours: "+cQ+" - "+cW+" = "+roundToTwo(cZ)+B+"sunPosition: "+roundToTwo(cM)+" / "+roundToTwo(cZ)+" * 100 = "+roundToTwo(cO)+B+"moonHours: (24 - "+cZ+")  * 60 = "+cL+A);bc.groupEnd();bc.trace("Tracing wd_sunPosition")}}function y(cH){(function(cQ){const cN=1;const cS=60;const cP=3600;const cU=86400;const cR=2629746;const cT=31556952;const cO=315569520;cQ.timeAgo=function(cY){var cX=new Date();var c1=Math.round((cX-cY)/1000);var c0="";var cW=0;var cV=false;var cZ;switch(true){case c1<=0:return n;break;case c1<cS:cW=Math.round(c1/cN);c0=b4;cV=cW>1;cZ=h;break;case c1<cP:cW=Math.round(c1/cS);c0=a5;cV=cW>1;cZ=h;break;case c1<cU:cW=Math.round(c1/cP);c0=aW;cV=cW>1;cZ=aN;break;case c1<cR:cW=Math.round(c1/cU);c0=cb;cV=cW>1;cZ=aN;break;case c1<cT:cW=Math.round(c1/cR);c0=g;cV=cW>1;cZ="";break;case c1<cO:cW=Math.round(c1/cT);c0=G;cV=cW>1;cZ="";break;default:cW=Math.round(c1/cT);c0=G;cV=cW>1;cZ=""}var c2="";if(cW){c2+=cW+" "}c2+=c0;if(cV){c2+=cZ}c2+=O;return c2}})(window);var cM=new Date(cH.dt*1000);var cI=cM.toLocaleTimeString(R);var cL=timeAgo(cM);var cG=cM.getHours()<10?"0"+cM.getHours():cM.getHours();var cK=cM.getMinutes();var cJ=cj.useUpdated;cJ+=ci.timePfx;cJ+=cI;cJ+=ci.PfxEnd;cJ+=cL;cJ+=ci.timeSfx;bg.innerHTML=cJ;bg.setAttribute("title",bs+cI);if(av){bc.groupCollapsed(b0+"wd_updatedTime"+aE,bm);bc.debug("RunOnce: "+be+B+"data.dt: "+cH.dt+B+"toISOString: "+new Date(cH.dt*1000).toISOString()+B+"toLocaleTimeString: "+new Date(cH.dt*1000).toLocaleTimeString(R)+B+"timeAgo: "+timeAgo(cM)+A);bc.groupEnd();bc.trace("Tracing wd_updatedTime")}}function aG(){if(av){bc.trace("Tracing wd_layerClasses")}var cH=ce.weather[0];var cG=cH.id;ae?T.className="s"+cG:T.classList.remove();ar?bU.className="d"+cG:bU.classList.remove();aZ?bU.className="r"+cG:bU.classList.remove();co?l.className="c"+cG:l.classList.remove();r?cl.className="m"+cG:cl.classList.remove()}function Q(cI){if(av){bc.trace("Tracing getWindDirection")}var cG=[348.75,326.25,303.75,281.25,258.75,236.25,213.75,191.25,168.75,146.25,123.75,101.25,78.75,56.25,33.75,11.25,0];for(var cH=0;cH<cG.length;cH++){if(cI>cG[cH]){return aL[cH]}}return"__"}function bH(){if(ce){var cH=ce.weather[0];var cG=cH.id;cr=Number(ce.sys.sunset);i=Number(ce.sys.sunrise);aD();ar=(cG>=300&&cG<=321);aZ=(cG>=500&&cG<=531);bU.style.display=aZ||ar?"block":"none";bU.style.opacity=aM||K?0.75:1;bx.style.display=aZ||ar?"block":"none";bx.style.opacity=aM||K?0.5:0.75;ae=(cG>=600&&cG<=622);T.style.display=ae?"block":"none";T.style.opacity=aM?0.1:0.75;S=(cG>=800&&cG<=803);co=(cG>=801&&cG<=804);l.style.display=co?"block":"none";l.style.opacity=aM?0.75:1;e=(cG==800||(S&&!aM));bP.style.display=e?"block":"none";bb=(cG==(800||801)&&aM);r=(cG==701||cG==711||cG==721||cG==741);cl.style.display=r?"block":"none";cl.style.opacity=aM?0.75:0.85;if(aM&&r){bb=true}cu.style.display=bb||K||k?"block":"none";cu.style.opacity=K||k?0.2:1;b2.style.display=bb?"block":"none";W.style.display=aM?"block":"none";aG();if(av){bc.groupCollapsed(b0+"setLayers"+aE,bm);bc.debug("RunOnce: "+be+B+"WeatherID: "+cG+B+"condition: "+B+"  isDrizzle: "+ar+B+"  isRainy: "+aZ+B+"  isSnowy: "+ae+B+"  isClear: "+S+B+"  isCloudy: "+co+B+"  isSunny: "+e+B+"  isClearNight: "+bb+B+"  isMisty: "+r+B+"weather.description: "+cH.description+A);bc.groupEnd();bc.trace("Tracing setLayers")}}}function aD(){var cK=bD.getTime()/1000;var cI=aM;var cH=new Date(i*1000);var cG=new Date(cr*1000);aM=cK>=cr+1740||cK+900<=i;K=cK-cr<1740&&cK-(cr-cG.getSeconds()-1)>=0;k=i-cK<900&&i-(cK+cH.getSeconds()+1)>=0;if(aM!==cI){a.className=aM?"nightmode":"daymode";if(aM){a.style.background="#121212 linear-gradient(to bottom left, #121212 10%,#333955 100%)"}else{a.style.background="#87ceeb linear-gradient(to bottom left, #87ceeb 0%,#ccc 100%)"}a.style.color=aM?"#fff":"#333";a.style.textShadow=aM?"1px 1px 1px black":"2px 2px 4px white"}var cJ=ce.weather[0];if(aM&&cJ.icon.substring(2,3)==="d"){cJ.icon=cJ.icon.substring(0,2)+"n"}if(!aM&&cJ.icon.substring(2,3)==="n"){cJ.icon=cJ.icon.substring(0,2)+"d"}q.className="weather i"+cJ.icon;q.innerHTML=ci.svgPfx+ci.usePfx+cJ.icon+ci.useSfx;if(av){bc.groupCollapsed(b0+"checkForSunset"+aE,bm);bc.debug("RunOnce: "+be+B+"nowtime: "+cK+B+"sunsettime: "+cr+B+"sunrisetime: "+i+B+"isDark: "+aM+B+"isDusk: "+K+B+"isDawn: "+k+A);bc.groupEnd();bc.trace("Tracing checkForSunset")}}function cq(cH,cG){if(av){bc.trace("Tracing randRange")}return Math.floor(Math.random()*(cG-cH+1))+cH}})();(function(){var b={},e=document,d,c,a,f;c=e.getElementById("gps");a=e.getElementById("forecast");f=e.getElementById("rain");b.clean=function(j){var k,h,g=j.childNodes.length;if(g===0){return}for(h=g;h>0;h-=1){k=j.childNodes[h-1];if(k.nodeType===8||(k.nodeType===3&&!/\S/.test(k.nodeValue))){j.removeChild(k)}}};setTimeout(function(){b.clean(c);b.clean(a);b.clean(f)},2000)})();