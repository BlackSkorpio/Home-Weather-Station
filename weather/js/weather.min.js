/*! Home Weather Station weather.js
 *  Copyright  (c) 2015-2019 Bjarne Varoystrand - bjarne ○ kokensupport • com
 *  License: MIT
 *  @author Bjarne Varoystrand (@black_skorpio)
 *  @version 1.5.2
 *  @description Forked from the ShearSpire Media Weather Clock by Steven Estrella (https://www.shearspiremedia.com)
 *               First introduced here: https://css-tricks.com/how-i-built-a-gps-powered-weather-clock-with-my-old-iphone-4/
 *  http://varoystrand.se | http://kokensupport.com
**/
(function(){var dc=true;var cl=true;var cV=false;var V=true;var cH="YOUR_API_KEY_HERE";var dB="1.5.2";var bw="Home Weahter Station";var bO=false;var K="CSL";var b7=0;var aC=0;var dQ=(location.hostname=="oxygen.local"||location.hostname=="varoystrand.se");var aO=(b7==1&&dQ)||location.hash=="#"+K;var aR=(aC==1);var X="se";var al="metric";var cU=document,bY=window;var bR,aL,da,db,bz,cp,af,J,bG,a6,di,aF,b5,b3,p,cS,bA,bo,c1,i,O,W,j,bf,aI,b6,at,bX,dJ,cd,dz,cQ,x,ax,co,d,bJ,bg,dI,au,ag,bq,bh,cZ,r,U,bW,ah,ds,cW,cG,c8,aZ,ci,bt,H,br,dO,cN,dn,cM,cR,aE,dM,cB,q,T,bE,aJ,dq,ay,D,bH,Q,cf,bl,c9,w,az,bu,cs,dC,M,aS,bT,cO,bN,cI,e,ac,bc,ca,dh,A,bv,ct,dE,N,aT,bV,aD,cY,P,bd,b0,aN,cJ,h,bB,b9,ad,aj,aq,dA,bF,l,c5,bn,ai,f,aX,cc,a2,cx,dy,Z,ck,cD,bx,L,dL,c4,bi,bD,cu,c3,dH;switch(X){case"se":c4="--";b3=bw+" är en webbaserad applikation som är gjord för att fungera på allt från smarta klockor till datorn; eller din TV.<br />Aktuell version av "+bw+" är "+dB;b5=bw+"<br />is now ready to go offline";dz="Läser in vädret";cQ="GEO-location service är inte tillgänglig, försök igen senare.";at="Vädret i Detalj";x="GPS: ";b6="Uppdaterades: ";dJ="Kordinater: ";cB="Längd- och latitudkoordinater baseras på den IP-adress du har tilldelats av din operatör, <br /> och används av oss för att bestämma var du befinner dig.";ax="Min/Max temperatur idag: ";J="Högsta temperatur idag: ";bG="Lägsta temperatur idag: ";af="Minsta och högsta temperatur för tillfället. <br /> Detta är avvikelse från nuvarande temp som är möjligt för stora städer och megalopoliserar geografiskt expanderade.";a6="Nederbörd: ";di="den senaste timmen";aF="de sista tre timmarna";co="Sikt: ";d="Sikt rapporteras i kilometer (km). Det definieras som det största avstånd vid vilket ett stort svart föremål kan ses och redovisas mot himlen. Sikt beräknas utifrån mätningar av ljusspridning och absorption av partiklar och gaser.";bJ="Molntäcke: ";bg="Den totala molnmängden ska ange hur stor del av himlen som skymd av moln utan hänsyn till molnslag eller molnhöjd och rapporteras i procent, där 0% betyder molnfritt och 100% helt molntäckt himmel.";dI="Lufttryck: ";aJ="Lufttrycket, även känt som atmosfärstryck, är kraften per enhetsarea som utövas på en yta av vikten av luft ovanför den ytan i atmosfären av en planet.<br />I de flesta fall är atmosfärstrycket nära approximerat av det hydrostatiska trycket som orsakas av luftens vikt över mätpunkten.";au="Luftfuktighet: ";bE="Luftfuktighet är vattendammmassan i den totala massan av torr luft i en viss volym luft vid en viss temperatur. I huvudsak ju varmare luften är desto mer vatten kan luften innehålla.<br />Relativ luftfuktighet blir förhållandet med högsta absoluta luftfuktighet mot den aktuella absoluta fuktigheten, som är beroende av aktuell lufttemperatur.";ag="Vindhastighet: ";ay="Prognoserna för vindhastighet och riktning är medelvärdet av dessa vindar och lulls, mätt över 10 minuter i en höjd av 10 meter över havet. Gustarna under en 10-minutersperiod är typiskt 40% högre än den genomsnittliga vindhastigheten.";cd="Vindriktning: ";dq="Vindriktningen är baserad på sann nordlig orientering och är den riktning som vinden blåser från. Till exempel blåser en nordlig vind från norr mot söder.<br />Vindhastighet och riktning kan påverkas väsentligt av lokal miljö. Klippor och andra landskapsfunktioner kommer att påverka vindar nära stranden.";L="Månfas: ";dL="Månens faser beror på positionen av både solen och månen i förhållande till jorden. När månen kretsar kring jorden förändras månens utseende beroende av hur ljuset från solen reflekteras av månens yta. Förändringen ger oss en indikation på månens framsteg i måncykeln, så kallade månfaser.";bz="Tidsplan";cp="Sol & Mån Data";bq="Soluppgång: ";T="Klockslag när solen börjar gå upp.";bh="Solnedgång: ";q="Klockslag när solen börjar gå ner.";cZ="Gyllene timmen: ";r="Morgonens gyllene timmen (mjukt ljus, bästa tiden för fotografering) slutar.";U="Kvällens gyllene timmen börjar";bW="Månen går upp: ";br="Klockslag när månen börjar gå upp.";ah="Månen går ner: ";H="Klockslag när månen börjar gå ner.";dO="Tilltagande ";cN="Avtagande ";dn="Skära";cM="Halvmåne";cR=cM;aE="Ny Måne";dM="Full Måne";bX="Beaufort Skalan: ";D="Beaufort vindskala mäter vindhastighet beroende på vindens påverkan på mark och hav. Även om systemet är gammalt (först utvecklat 1805 av Sir Francis Beaufort), förblir det ett mycket vanligt system för att mäta vindhastighet idag.";bl="Vindstyrka i beaufort: ";c9="Lugnt";w="Svag vind";az=w;bu="Måttlig vind";cs=bu;dC="Frisk vind";M=dC;aS="Hård vind";bT=aS;cO="Mycket hård vind";bN="Storm";cI="Svår storm";e="Orkan";ac=e;bc=e;ca=e;dh=e;A=e;bv="Eller knappt tillräckligt för att ge styrfart.";ct="Or that in which a man-of-war, with all sail set, and clean full, would go in smooth water, from";aS="High wind, moderate gale, near gale";dE="Or that to which a well-conditioned man-of-war could just carry in chase, full and by";N="Eller det som hon knappt kunde bära när revat huvudstorsegel och drivs framåt.";aT="Or that which would reduce her to storm stay-sails.";bV="Eller det som ingen segelduk kunde klara av.";aI="Associerad varningsflagga: ";Q="Icon legend";bH="Förklaring till vad de olika ikonerna representerar.";p="precis nu";cS="sekund";bA="minut";bo="timma";c1="dag";i="månad";O="år";W=" sedan";j="er";bf="r";bi="&#8681;";bD="&hellip;";cu="Dra ner för att uppdatera";c3="Släpp för att uppdatera";dH="Uppdaterar";cY=["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"];P=["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"];bd=["N","NNV","NV","VNV","V","VSV","SV","SSV","S","SSÖ","SÖ","ÖSÖ","Ö","ÖNÖ","NÖ","NNÖ","N"];break;default:c4="--";b3=bw+" is a webbased weather app that is designed to be runned on everything from smart watches and computers, to big screen devices as your TV set.<br />Current version of  "+bw+" is "+dB;b5=bw+" is now ready to go offline";dz="Getting weather";cQ="IP address location service is unavailable.";at="Weather Details";x="GPS: ";b6="Updated: ";dJ="Location: ";cB="Length and latitude coordinates are based on the IP address assigned to you by your operator, <br /> and used by us to determine your location.";ax="Hourly Max | Min: ";J="Maximum temperature today: ";bG="Minimum temperature today: ";af="Minimum and Maximum temperature at the moment.<br />This is deviation from current temp that is possible for large cities and megalopolises geographically expanded.";a6="Precipion: ";di="in the last hour";aF="in the last 3 hours";co="Visibility: ";d="Visual range is reported in miles (mi). It is defined as the greatest distance at which a large black object can be seen and recognized against the background sky. Visual range is calculated from measurements of light scattering and absorption by particles and gases.";bJ="Overcast: ";bg="The total cloud amount should indicate how much of the sky is obscured by clouds without regard to cloud or cloud height and reported in percent, where 0% means cloudless and 100% completely clouded sky.";dI="Pressure: ";aJ="Air pressure also known as atmospheric pressure is the force per unit area exerted on a surface by the weight of air above that surface in the atmosphere of a planet.<br />In most circumstances atmospheric pressure is closely approximated by the hydrostatic pressure caused by the weight of air above the measurement point.";au="Humidity: ";bE="Humidity is the water vapor mass contained within the total mass of dry air inside a specified volume of air at a specific temperature. Essentially, the hotter the air is, the more water the air can contain.<br />Relative humidity becomes the ratio of highest absolute humidity against the current absolute humidity, which is dependent on current air temperature.";ag="Winds: ";ay="The forecasts of wind speed and direction are the average of these gusts and lulls, measured over a 10-minute period at a height of 10 metres above sea level. The gusts during any 10-minute period are typically 40% higher than the average wind speed.";cd="Wind direction: ";dq="The wind direction is based on true north orientation and is the direction the wind is blowing from. For example, a northerly wind is blowing from the north towards the south.<br />Wind speed and direction can be influenced significantly by the local environment. Cliffs and other landscape features will affect winds near the shore.";L="Lunar Phase: ";dL="The lunar phase or phase of the Moon is the shape of the directly sunlit portion of the Moon as viewed from Earth. The lunar phases gradually and cyclically change over the period of a synodic month (about 29.53 days), as the orbital positions of the Moon around Earth and of Earth around the Sun shift.<br />The Moon's rotation is tidally locked by Earth's gravity; therefore, most of the same lunar side always faces Earth. This near side is variously sunlit, depending on the position of the Moon in its orbit. Thus, the sunlit portion of this face can vary from 0% (at new moon) to 100% (at full moon). The lunar terminator is the boundary between the illuminated and darkened hemispheres.";bz="Schedule";cp="Sun & Moon Data";bq="Sunrise: ";T="Time when the sun begins to rise";bh="Sunset: ";q="Time when the sun begins to set";cZ="Golden hour: ";r="morning golden hour (soft light, best time for photography) ends";U="evening golden hour starts";bW="Moon Rises: ";br="Time when the moon begins to rise";ah="Moon Sets: ";H="Time when the moon begins to set";dO="Waxing ";cN="Waning ";dn="Crescent";cM="Quarter";cR="Gibbous";aE="New Moon";dM="Full Moon";bX="Beaufort Scale: ";D="The Beaufort wind scale measures wind speed according to the impact the wind has on the land and sea. Although the system is old (first developed in 1805 by Sir Francis Beaufort), it remains a widely used system to measure wind speed today.";bl="Beaufort number: ";c9="Calm";w="Light air";az="Light breeze";bu="Gentle breeze";cs="Moderate breeze";dC="Fresh breeze";M="Strong breeze";aS="Moderate gale";bT="Fresh gale";cO="Strong gale";bN="Whole gale";cI="Storm";e="Hurricane";ac=e;bc=e;ca=e;dh=e;A=e;bv="Or just sufficient to give steerage way.";ct="Or that in which a man-of-war, with all sail set, and clean full, would go in smooth water, from";aS="High wind, moderate gale, near gale";dE="Or that to which a well-conditioned man-of-war could just carry in chase, full and by";N="Or that which she could scarcely bear close-reefed main-topsail and reefed foresail.";aT="Or that which would reduce her to storm stay-sails.";bV="Or that which no canvas could withstand.";aI="Associated warning flag: ";Q="Icon legend";bH="Explanation on what the different icons represents.";p="just now";cS="sec";bA="min";bo="hour";c1="day";i="month";O="year";W=" ago";j="s";bf="s";bi="&#8681;";bD="&hellip;";cu="Pull down to refresh";c3="Release to refresh";dH="Refreshing";cY=["January","February","March","April","May","June","July","August","September","October","November","December"];P=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];bd=["N","NNW","NW","WNW","W","WSW","SW","SSW","S","SSE","SE","ESE","E","ENE","NE","NNE","N"]}switch(al){case"metric":ai="°C";cc="ms";aX="km";f="%";a2="bft";cx="hPa";dy="%";Z="eu";ck={hour:"numeric",minute:"2-digit"};break;case"imperial":ai="°F";cc="mph";aX="mi";f="%";a2="bft";cx="hPa";dy="%";Z="en";ck={hour:"numeric",minute:"2-digit"};break;default:ai="°K";cc="mph";aX="m";f="%";a2="bft";cx="hPa";dy="%";Z="en";ck={hour:"numeric",minute:"2-digit"}}var da=new Object();var db=new Object();da={dataDiv:"<span class='divider'>|</span>",wd_LB:"&#013;",svgPfx:'<svg class="svgIcon" role="img">',titlePfx:'<title style="white-space:pre-line;margin:0 10px 0 10px;">',titleSfx:"</title>",usePfx:'<use xlink:href="#',useSfx:'" /></svg>',sumPfx:"<summary>",sumSfx:"</summary>",spanPfx:"<span>",spanTxt:'<span class="dataText">',spanSfx:"</span>",timePfx:'<time class="dataText" datetime="',PfxEnd:'">',timeSfx:"</time>",liPfx:"<li",idPfx:' id="'};var dR=da.liPfx,cy=da.idPfx,ar=da.timePfx,by=da.PfxEnd,cw=da.timeSfx,b1=da.dataDiv,a3=da.wd_LB,dG=da.sumPfx,a5=da.sumSfx,aW=da.spanPfx,dr=da.spanTxt,df=da.spanSfx,aQ=da.svgPfx,bp=da.titlePfx,dN=da.titleSfx,aB=da.usePfx,cE=da.useSfx;db={useLocation:aQ+bp+dJ+dN+aB+"location"+cE,useSunRise:aQ+bp+bq+dN+aB+"sunrise"+cE,useSunSet:aQ+bp+bh+dN+aB+"sunset"+cE,useGoldenHour:aQ+bp+cZ+dN+aB+"goldenhour"+cE,useMoonRise:aQ+bp+bW+dN+aB+"moonrise"+cE,useMoonSet:aQ+bp+ah+dN+aB+"moonset"+cE,useHumidity:aQ+bp+au+dN+aB+"humidity"+cE,useWindspeed:aQ+bp+ag+dN+aB+"windspeed"+cE,useGustspeed:aQ+bp+ag+dN+aB+"gusts"+cE,usePressure:aQ+bp+dI+dN+aB+"pressure"+cE,useTemprature:aQ+bp+ai+dN+aB+"temperatur"+cE,useLowTemp:aQ+bp+bG+dN+aB+"hilowtemp"+cE,useHighTemp:aQ+bp+J+dN+aB+"hilowtemp"+cE,useWindRose:aQ+bp+cd+dN+aB+"windirection"+cE,useWeatherDude:'<svg class="getting" role="img">'+bp+dz+dN+aB+"weatherDude"+cE,useBeaufort:aQ+aB+"bf0"+cE,useVisibility:aQ+bp+co+dN+aB+"visibility"+cE,useOvercast:aQ+bp+bJ+dN+aB,useUpdated:aQ+bp+b6+dN+aB+"clock"+cE,useLogosmall:aQ+bp+bw+dN+aB+"logosmall"+cE,useFlatMoon:aQ+aB+"moon_flat"+cE};var aw=db.useLocation,a8=db.useSunRise,dD=db.useSunSet,c0=db.useGoldenHour,aG=db.useMoonRise,F=db.useMoonSet,aV=db.useHumidity,bC=db.useWindspeed,ap=db.usePressure,bU=db.useTemprature,ba=db.useLowTemp,bI=db.useHighTemp,dF=db.useWindRose,c=db.useWeatherDude,dK=db.useBeaufort,de=db.useVisibility,cT=db.useOvercast,ch=db.useUpdated,bM=db.useLogosmall,dP=db.useGustspeed,I=db.useFlatMoon;var a7,a,c7,cg,b2,aH,bQ,bP,a9,dl,dj,cX,aM,dx,cj,cK,c2,cr,bj,aU,ce,R,z,cm,s,ao,c6,o;var av="";var dp=0;var k=0;var n,cF,cb,ab,cz,du,cP,ae,dg,be,dk,bs,aK,an,g,bK,aa,u,S,m,bL,cL,a1,bZ,G,E,a4;bL=console;a1=" -=- ";cL="%c"+a1;bZ="font:1.5em sans-serif; color:orange;";G="\n";E=G+"//-------------------------------------//"+G+G;a4="position:absolute;height:0;width:0;visibility:hidden;";cU.addEventListener("DOMContentLoaded",dw,false);function dw(){var dd=bY.location.href;if(dd.indexOf("localhost:")>=0||dd.indexOf("file:")>=0){dc=false}if(V){var dt=new XMLHttpRequest();dt.open("GET","img/sprite.svg",true);dt.send();dt.onload=function(dT){var dS=cU.createElement("div");dS.className="svgSprite";dS.setAttribute("style",a4);dS.setAttribute("aria-hidden","true");dS.innerHTML=dt.responseText;cU.body.insertBefore(dS,cU.body.childNodes[0])}}cU.getElementsByTagName("html")[0].setAttribute("lang",X);a7=cU.querySelector("main");a=cU.getElementById("container");c7=cU.getElementById("svgValues");b2=cU.getElementById("date");aH=cU.getElementById("time");bQ=cU.getElementById("updateTime");z=cU.getElementById("weather");cm=cU.getElementById("precipion");a9=cU.getElementById("details");dl=cU.getElementById("detailsHeader");bP=cU.getElementById("weatherdetails");aU=cU.getElementById("gps");ao=cU.getElementById("beaufort");dj=cU.getElementById("modal");s=cU.getElementById("icon");n=cU.getElementById("cloudlayer");cF=cU.getElementById("rainlayer");cb=cU.getElementById("rainwindow");ab=cU.getElementById("snowlayer");cz=cU.getElementById("sunlayer");du=cU.getElementById("clearnightlayer");cP=cU.getElementById("shooting");ae=cU.getElementById("moonOrbit");dg=cU.getElementById("mistlayer");ce=cU.getElementById("gpsbutton");ce.addEventListener("click",cq,false);o=dm(0,14);cq();y();cv();setInterval(y,1000)}function cv(){if(aR){bL.trace("Tracing wd_core")}var dX,dY,dT,dZ,dt,dU,dd,dW,dS;dY=1;dT="varoystrand.se";dZ=(dY==1||location.hostname==dT);dX="By Baldurs Photography";dt=aQ;dU=bp;dd=dN;dW=aB;dS=cE;cU.title=bw+" "+dX;var dV=function(){var d6,d2,eb,d4,d8,ea,d1,d5,d9,d7,d0,d3;d2="#buildlink";d4=cU.getElementById("buildlink");d1=cU.getElementById("ribbonwrapp");eb=cU.querySelectorAll(d2);d6=be?"#000":"var(--db)";d7="//github.com/BlackSkorpio/Home-Weather-Station";d8="window.open(this.href);return false;";ea="nofollow";d5=bp+"Fork "+bw+" on GitHub"+dN;d9="<style>#f_s1{--stateClr:"+d6+"}</style>";d0=bM;d3=aQ+d5+aB+"ribbon"+cE;eb.forEach(function(ec){return ec.setAttribute("href",d7),ec.setAttribute("onclick",d8),ec.setAttribute("rel",ea)});d4.setAttribute("title",bw+" "+dB);d4.innerHTML=d0;d1.innerHTML=d3;if(dZ!=1){d1.remove()}if(aO){bL.groupCollapsed(cL+"wd_core => toGitHub"+a1,bZ);bL.debug("RunOnce: "+bO+G+"stateClr: "+d6+E);bL.groupEnd();bL.trace("Tracing toGitHub")}};dV();PullToRefresh.init({mainElement:"#details",triggerElement:"#clocklayer",classPrefix:"wd--",iconArrow:bi,iconRefreshing:bD,instructionsPullToRefresh:cu,instructionsReleaseToRefresh:c3,instructionsRefreshing:dH})}function y(){var dS=cC();b2.innerHTML=dS.datehtml;aH.innerHTML=dS.timehtml;b2.dateTime=cg.toISOString();aH.dateTime=cg.toISOString();var dt=cg.getSeconds();var dd=cg.getMinutes();if(cV&&dt===0){cn();if(dd%15===o){aY()}if(dd%5===0&&!cl){cq()}}}function cC(){cg=new Date();var dX=cg.getFullYear();var d6=cY[cg.getMonth()];var d5=cg.getDate();var d3=P[cg.getDay()];var dT=cg.getHours();var d1=cg.getMinutes();var dY=cg.getSeconds();var dW,dd,dV,d0,d8,dZ;dW='<span class="liveTime">';dd='<span class="hours">';dZ='<span class="timeDiv">:</span>';dV='<span class="minutes">';d0='<span class="seconds">';d8=df;var d7=d1<10?"0"+d1:d1;var d2=dY<10?"0"+dY:dY;if(al=="metric"){var dU=dT<10?"0"+dT:dT;var dt=d3+" "+d5+" "+d6;var dS=dW;dS+=dd;dS+=dU;dS+=d8;dS+=dZ;dS+=dV;dS+=d7;dS+=d8;dS+=d0;dS+=d2;dS+=d8;dS+=d8}else{var d4=dT<12?"AM":"PM";var dU=dT>12?dT-12:dT;if(dT===0){dU=12}var dt=d3+", "+d6+" "+d5;var dS=dW;dS+=dd;dS+=dU;dS+=d8;dS+=dZ;dS+=dV;dS+=d7;dS+=d8;dS+=d0;dS+=d2+" "+d4;dS+=d8;dS+=d8}return{datehtml:dt,timehtml:dS}}function cq(){if(aR){bL.trace("Tracing getLocation")}if(cl){b8()}else{bb()}}function bb(){if(aR){bL.trace("Tracing getGPSLocation")}if(navigator.geolocation){navigator.geolocation.getCurrentPosition(bm,ak)}else{aU.innerHTML=cQ;cV=false}}function b8(){if(aR){bL.trace("Tracing getIPLocation")}var dd=new XMLHttpRequest();var dt;dd.onreadystatechange=function(){if(!cV){if(this.readyState===4){var dS=JSON.parse(dd.responseText);var dT=true;if(this.status===200&&dT){if(dS.status==="success"){c2=Number(dS.lat);cr=Number(dS.lon);av=dS.city;bj=dS.region;dt=dS.countryCode;ce.style.display="none";bk()}else{ce.style.display="block";cl=false}}else{ce.style.display="block";cl=false}}}};dd.open("GET","https://extreme-ip-lookup.com/json/",true);dd.send()}function ak(){if(aR){bL.trace("Tracing geoError")}aU.innerHTML=cQ}function bm(dd){if(aR){bL.trace("Tracing gpsPosition")}ce.style.display="none";c2=dd.coords.latitude;cr=dd.coords.longitude;aU.innerHTML=av+" ("+c2.toFixed(2)+" | "+cr.toFixed(2)+")";bk()}function bk(){if(aR){bL.trace("Tracing showPosition")}var dd="lat="+c2+"&lon="+cr;if(dc){R="weather.php?"+dd+"&lang="+X+"&units="+al}else{R="https://api.openweathermap.org/data/2.5/weather?";R+=dd+"&lang="+X+"&units="+al+"&APPID="+cH}if(!cV){aY();cV=true}}function aY(){if(aR){bL.trace("Tracing getWeather")}z.innerHTML=dz+"<br />"+c;var dd=new XMLHttpRequest();if(dc){dd.responseType="document"}else{dd.responseType="text"}dd.onreadystatechange=function(){if(this.readyState===4&&this.status===200){var dt=dc?dd.response.body.textContent:dd.responseText;c6=JSON.parse(dt);v(c6)}};dd.open("GET",R,true);dd.send()}function v(d8){var dd;av=d8.name;var d1=d8.sys.country;var dZ=d8.wind.speed*1.4;var dt=d8.visibility/1000;var dX=d8.visibility*0.0006213712;switch(al){case"metric":c5=dt.toFixed(1);bn=+d8.main.temp.toFixed(1);break;case"imperial":c5=dX.toFixed(2);bn=+d8.main.temp.toFixed(2);break;default:c5=d8.visibility;bn=d8.main.temp}var dT=be?"overcastNight":"overcastDay";dl.innerHTML=at;var ea=dR+cy+"wd_location"+by;ea+=aw;ea+='<span id="city">';ea+=av;ea+=df;ea+='<span id="country">, (';ea+=d1;ea+=") ";ea+=df;ea+=aW;ea+='<a href="https://openweathermap.org/city/';ea+=d8.id;ea+='" title="">';ea+=c2.toFixed(2);ea+=b1;ea+=cr.toFixed(2);ea+="</a>";ea+=df;var dV=dR+cy+"wd_pressure"+by;dV+=ap;dV+=dr;dV+=d8.main.pressure;dV+=cx;dV+=df;var d7=dR+cy+"wd_humidity"+by;d7+=aV;d7+=dr;d7+=d8.main.humidity;d7+=dy;d7+=df;var d3=dR+cy+"wd_wind"+by;d3+=bC;d3+=dr;d3+=d8.wind.speed;d3+=dP+dZ.toFixed(1);d3+=cc;d3+=df;var d5=dr;if(d8.wind.deg!=null){d5+=d8.wind.deg.toFixed(0);d5+="°";d5+=Y(d8.wind.deg)}else{d5+=c4}d5+=df;var d9=dR+cy+"wd_windir"+by;d9+=dF;d9+=d5;var dS=new Date(d8.sys.sunrise*1000);var d4=new Date(d8.sys.sunset*1000);var dW=dR+cy+"wd_sunrise"+by;dW+=a8;dW+=ar;dW+=dS.toString();dW+=by;dW+=dS.toLocaleTimeString(Z,ck);dW+=cw;var d0=dR+cy+"wd_sunset"+by;d0+=dD;d0+=ar;d0+=d4.toString();d0+=by;d0+=d4.toLocaleTimeString(Z,ck);d0+=cw;var d6=dR+cy+"wd_visibility"+by;d6+=de;d6+=dr;d6+=d8.visibility!=null?c5+aX:c4;d6+=df;var dY=dR+cy+"wd_clouds"+by;dY+=cT+dT+cE;dY+=dr;dY+=d8.clouds.all;dY+=f;dY+=df;bP.innerHTML=t(d8);bP.innerHTML+=C(d8);bP.innerHTML+=d3;bP.innerHTML+=d9;bP.innerHTML+=dV;bP.innerHTML+=d7;bP.innerHTML+=d6;bP.innerHTML+=dY;bP.innerHTML+=bS();bP.innerHTML+=dW;bP.innerHTML+=d0;bP.innerHTML+=ea;var d2=d8.weather[0];s.className="weather i-"+d2.icon;s.style.opacity=1;s.innerHTML=aQ+aB+d2.icon+cE;var dU=bU;dU+=dr;dU+=bn;dU+=ai;dU+=df;dU+=dr;dU+=d2.description;dU+=df;z.innerHTML=dU;aP(d8);b4(d8,cD);b(d8);aA(d8);cn();am(d8);cA();B(d8);if(aO){bL.groupCollapsed(cL+"processWeather"+a1,bZ);bL.debug("RunOnce: "+bO+G+"Weather id: "+d2.id+G+"Visibility: "+d8.visibility+G+G+"TempRaw: "+d8.main.temp+G+"TempRaw fixed: "+ +d8.main.temp.toFixed(1)+G+"localtemperature: "+bn+G+E);bL.groupEnd();bL.groupCollapsed(cL+"data"+a1,bZ);Object.keys(d8).forEach(function(eb){bL.debug(eb+": "+d8[eb])});bL.groupEnd();bL.groupCollapsed(cL+"weather"+a1,bZ);Object.keys(d2).forEach(function(eb){bL.debug(eb+": "+d2[eb])});bL.groupEnd();bL.groupCollapsed(cL+"main"+a1,bZ);Object.keys(d8.main).forEach(function(eb){bL.debug(eb+": "+d8.main[eb])});bL.groupEnd();bL.groupCollapsed(cL+"Wind"+a1,bZ);Object.keys(d8.wind).forEach(function(eb){bL.debug(eb+": "+d8.wind[eb])});bL.groupEnd();bL.groupCollapsed(cL+"rain"+a1,bZ);Object.keys(d8.rain).forEach(function(eb){bL.debug(eb+": "+d8.rain[eb])});bL.groupEnd();bL.groupCollapsed(cL+"clouds"+a1,bZ);Object.keys(d8.clouds).forEach(function(eb){bL.debug(eb+": "+d8.clouds[eb])});bL.groupEnd();bL.groupCollapsed(cL+"sys"+a1,bZ);Object.keys(d8.sys).forEach(function(eb){bL.debug(eb+": "+d8.sys[eb])});bL.groupEnd()}}function C(dS){if(aR){bL.trace("Tracing dewPointCalc")}var dt,dU,dV,dW,dT,dd;dt=dS.main.humidity;dU=dS.main.temp;dV=dU-(100-dt)/5;dW=dr;dW+=dV.toFixed(1);dW+=ai;dW+=df;dT=aQ;dT+=aB;dT+="dewpoint";dT+=cE;if(aO){bL.groupCollapsed(cL+"dewPointCalc"+a1,bZ);bL.debug("Temperature: "+dU+ai+G+"Humidity: "+dt+"%"+G+"Dew Point: "+dW+ai+G+ +E);bL.groupEnd()}return dd='<li id="wd_dewpoint">'+dT+dW}function bS(eq){if(aR){bL.trace("Tracing wd_sunCalc")}var ec=new Date();var ea=c2.toFixed(2);var eC=cr.toFixed(2);var dd=cU.getElementById("MoonNew");var dZ=cU.getElementById("MoonFull");var dY=cU.getElementById("MoonWax");var d8=cU.getElementById("MoonWan");var dW=cU.getElementById("MoonCre");var eo=cU.getElementById("MoonQua");var er=cU.getElementById("MoonGib");var ee,dV,ex,eD,et,eb,d9,d7,dt,d2,ey,dX,dS,ez,d5,eu,d0,d4,d1,eA,d6,d3,ep,ev,ed,eq,eB,dU,dT,ei,es;ee=SunCalc.getMoonTimes(ec,ea,eC);dV=SunCalc.getMoonPosition(ec,ea,eC);ex=SunCalc.getMoonIllumination(ec);dX=SunCalc.getTimes(ec,ea,eC);dS=SunCalc.getPosition(ec,ea,eC);try{d7=new Date(ee.rise).toISOString();d2=ee.rise.toLocaleTimeString(Z,ck)}catch(ew){}try{dt=new Date(ee.set).toISOString();ey=ee.set.toLocaleTimeString(Z,ck)}catch(ew){}ez=new Date(dX.goldenHourEnd).toISOString();d5=new Date(dX.goldenHour).toISOString();eu=dX.goldenHourEnd.toLocaleTimeString(Z,ck);d0=dX.goldenHour.toLocaleTimeString(Z,ck);eD=ex.angle.toFixed(2);et=ex.fraction.toFixed(2);eb=ex.phase.toFixed(2);dd.innerHTML=aE;dZ.innerHTML=dM;dY.innerHTML=dO;d8.innerHTML=cN;dW.innerHTML=dn;eo.innerHTML=cM;er.innerHTML=cR;d9={mpd0:(eb>=0&&eb<=0.08),mpd1:(eb>=0.09&&eb<=0.24),mpd2:(eb>=0.25&&eb<=0.26),mpd3:(eb>=0.27&&eb<=0.49),mpd4:(eb>=0.5&&eb<=0.58),mpd5:(eb>=0.59&&eb<=0.74),mpd6:(eb>=0.75&&eb<=0.76),mpd7:eb>=0.76};var en=d9.mpd0,em=d9.mpd1,el=d9.mpd2,ek=d9.mpd3,ej=d9.mpd4,eh=d9.mpd5,eg=d9.mpd6,ef=d9.mpd7;if(en){eB="phase_new";ei=aE;dU="new-moon"}if(em){eB="phase_crescent";ei=dO+dn;dU="waxing crescent"}if(el){eB="phase_quarter";ei=cM;dU="first quarter"}if(ek){eB="phase_gibbous";ei=dO+cM;dU="waxing gibbous"}if(ej){eB="phase_full";ei=dM;dU="full-moon"}if(eh){eB="phase_gibbous";ei=cN+cM;dU="waning gibbous"}if(eg){eB="phase_quarter";ei=cM;dU="last quarter"}if(ef){eB="phase_crescent";ei=cN+dn;dU="waning crescent"}dT='<svg class="svgIcon '+dU+'" role="img">'+aB+eB+cE;es=dT;es+=ei;es+=" (";es+=eb;es+="%)";d4=F;if(d7!=null){d4+=ar;d4+=d7;d4+=by;d4+=d2;d4+=cw}else{d4+=dr;d4+=c4;d4+=df}d1=aG;if(dt!=null){d1+=ar;d1+=dt;d1+=by;d1+=ey;d1+=cw}else{d1+=dr;d1+=c4;d1+=df}d3=ar;d3+=ez;d3+=by;d3+=eu;d3+=cw;ep=ar;ep+=d5;ep+=by;ep+=d0;ep+=cw;ev=aQ;ev+=bp;ed=dN;ed+=aB;ed+="goldenhour";ed+=cE;eA=ev;eA+=cZ+r;eA+=ed;eA+=d3;d6=ev;d6+=cZ+U;d6+=ed;d6+=ep;if(aO){bL.groupCollapsed(cL+"wd_sunCalc"+a1,bZ);bL.group("Moon Times");Object.keys(ee).forEach(function(eE){bL.debug(eE+": "+ee[eE])});bL.groupEnd();bL.group("Moon Position");Object.keys(dV).forEach(function(eE){bL.debug(eE+": "+dV[eE])});bL.groupEnd();bL.group("Moon Illumination");Object.keys(ex).forEach(function(eE){bL.debug(eE+": "+ex[eE])});bL.groupEnd();bL.group("Sun Times");Object.keys(dX).forEach(function(eE){bL.debug(eE+": "+dX[eE])});bL.groupEnd();bL.group("Sun Position");Object.keys(dS).forEach(function(eE){bL.debug(eE+": "+dS[eE])});bL.groupEnd();bL.groupEnd()}return eq='<li id="wd_spacerHour">'+bz,eq+='<li id="wd_morning">'+eA,eq+='<li id="wd_evening">'+d6,eq+='<li id="wd_moonrise">'+d4,eq+='<li id="wd_moonset">'+d1,eq+='<li id="wd_spacerCord">'+cp,eq+='<li id="wd_moonphase">'+es}function aA(dV){var dd=dV.rain;snow=dV.snow;if(dd||snow!=null){if(aR){bL.trace("Tracing wd_precipion")}var dT,d1,dS,dZ,dU,d0,d2,dX,dW,dt,dY;if(dd!=null){dT=dd["1h"],dS=dd["3h"];d2="precipion_rain";if(dT!=null){dU=dT,dt=di}if(dS!=null){dU=dS,dt=aF}}if(snow!=null){d1=snow["1h"],dZ=snow["3h"];d2="precipion_snow";if(d1!=null){dU=d1,dt=di}if(dZ!=null){dU=dZ,dt=aF}}d0=aQ;d0+=bp;d0+=a6;d0+=dN;d0+=aB;d0+=d2;d0+=cE;dY=dr;dY+=dU.toFixed(1);dY+="mm ";dY+=dt;dY+=df;cm.innerHTML=d0+dY;if(aO){bL.groupCollapsed(cL+"wd_precipion"+a1,bZ);bL.debug("Rain: "+dd+G+"  Rain1: "+dT+G+"  Rain3: "+dS+G+"Snow: "+dd+G+"  Snow1: "+d1+G+"  Snow3: "+dZ+G+E);bL.groupEnd()}}}function t(dS){var dt,dU,dd,dV,dT;switch(al){case"metric":dt=+dS.main.temp_min.toFixed(1);dU=+dS.main.temp_max.toFixed(1);break;case"imperial":dt=+dS.main.temp_min.toFixed(2);dU=+dS.main.temp_max.toFixed(2);break;default:dt=dS.main.temp_min;dU=dS.main.temp_max}dd=((dt!=null||dU!=null)&&dU!=dt);dV=dR+cy+"wd_lowtemp"+by;dV+=ba;dV+=dr;dV+=dU;dV+=ai;dV+=" / ";dV+=dt;dV+=ai;dV+=df;if(dd){bP.innerHTML+=dT}if(aO&&dd){bL.groupCollapsed(cL+"processWeather"+a1,bZ);bL.debug("RunOnce: "+bO+G+"TempMin: "+dt+G+"TempMax: "+dU+G+G+E);bL.groupEnd()}return dT=dV}function aP(ep){if(aR){bL.trace("Tracing wd_beaufort")}var dd=ep.wind.speed.toFixed(2);switch(al){case"metric":cJ=dd;break;case"imperial":cJ=dd*0.44704;break;default:cJ=dd}var d9=new Object();d9={ws00:(cJ>=0&&cJ<=0.29),ws01:(cJ>=0.3&&cJ<=1.59),ws02:(cJ>=1.6&&cJ<=3.33),ws03:(cJ>=3.4&&cJ<=5.49),ws04:(cJ>=5.5&&cJ<=7.99),ws05:(cJ>=8&&cJ<=10.79),ws06:(cJ>=10.8&&cJ<=13.89),ws07:(cJ>=13.9&&cJ<=17.19),ws08:(cJ>=17.2&&cJ<=20.79),ws09:(cJ>=20.8&&cJ<=24.49),ws10:(cJ>=24.5&&cJ<=28.49),ws11:(cJ>=28.5&&cJ<=32.69),ws12:(cJ>=32.7&&cJ<=36.99),ws13:(cJ>=37&&cJ<=41.49),ws14:(cJ>=41.5&&cJ<=46.19),ws15:(cJ>=46.2&&cJ<=50.99),ws16:(cJ>=51&&cJ<=56.09),ws17:(cJ>=56.1&&cJ<=61.2)};var d6=d9.ws00,d5=d9.ws01,d4=d9.ws02,d3=d9.ws03,d1=d9.ws04,d0=d9.ws05,dZ=d9.ws06,dY=d9.ws07,dW=d9.ws08,dU=d9.ws09,er=d9.ws10,eq=d9.ws11,eo=d9.ws12,en=d9.ws13,em=d9.ws14,el=d9.ws15,ek=d9.ws16,ej=d9.ws17;if(d6){bB=0;cf=bv+a3+c9}if(d5){bB=1;cf=w+a3+bv}if(d4){bB=2;cf=az+a3+bv}if(d3){bB=3;cf=bu+a3+bv}if(d1){bB=4;cf=cs+a3+bv}if(d0){bB=5;cf=dC+a3+dE}if(dZ){bB=6;cf=M+a3+dE}if(dY){bB=7;cf=aS+a3+dE}if(dW){bB=8;cf=bT+a3+dE}if(dU){bB=9;cf=cO+a3+dE}if(er){bB=10;cf=bN+a3+N}if(eq){bB=11;cf=cI+a3+aT}if(eo){bB=12;cf=e+a3+bV}if(en){bB=13;cf=ac+a3+bV}if(em){bB=14;cf=bc+a3+bV}if(el){bB=15;cf=ca+a3+bV}if(ek){bB=16;cf=dh+a3+bV}if(ej){bB=17;cf=A+a3+bV}var ef=new Object();ef={bft00:(bB>=0&&bB<=2),bft01:(bB>=3&&bB<=4),bft02:(bB>=5&&bB<=6),bft03:(bB>=7&&bB<=8),bft04:(bB>=9&&bB<=10),bft05:(bB>=11&&bB<=17)};var ee=ef.bft00,ed=ef.bft01,ec=ef.bft02,eb=ef.bft03,ea=ef.bft04,d8=ef.bft05;if(ee){b9=0,ad=75,aj=55,aq=35,aN=10}if(ed){b9=1,ad=65,aj=45,aq=35,aN=5}if(ec){b9=2,ad=60,aj=40,aq=30,aN=4}if(eb){b9=3,ad=55,aj=35,aq=25,aN=3}if(ea){b9=4,ad=45,aj=25,aq=15,aN=2}if(d8){b9=5,ad=35,aj=15,aq=5,aN=1}var d7=new Object();d7={wfl01:(cJ>=10.8&&cJ<=17.19),wfl02:(cJ>=17.2&&cJ<=24.49),wfl03:(cJ>=24.5&&cJ<=32.69),wfl04:(cJ>=32.7&&cJ<=61.2),wfl05:(cJ>=10.8&&cJ<=61.2)};var dX=d7.wfl01,dV=d7.wfl02,dT=d7.wfl03,dS=d7.wfl04,dt=d7.wfl05;if(dX){dA="gale1"}if(dV){dA="gale2"}if(dT){dA="storm1"}if(dS){dA="storm2"}if(dt){var eg=aI;var ei=aQ;ei+=bp;ei+=eg;ei+=dN;ei+=aB+dA;ei+=cE}else{ei=""}var d2=bl+bB+a2+a3+cf;var eh=aQ;eh+=bp;eh+=d2;eh+=dN;eh+=aB+"bf0";eh+=cE;ao.className="windspeed i-"+bB+"bf";ao.innerHTML=eh+ei;if(aO){bL.groupCollapsed(cL+"wd_beaufort"+a1,bZ);bL.debug("RunOnce: "+bO+G+"wd_ws: "+cJ+G+"wd_bf: "+bB+G+"bfSvgId: "+b9+G+"ws_s: "+ad+G+"ws_m: "+aj+G+"ws_f: "+aq+G+"ws_bft: "+aN+E);bL.groupEnd()}}function am(ey){if(aR){bL.trace("Tracing wd_modal")}var d4,eb,d1,d8,dd,d7,el,dV,dt,ez,ei,dS,es,d6,eh,d2,ej,ex,d3,ef,ev,ee,ep,et,dW,ek;var d4=cU.querySelector("#modal");var eb=cU.querySelector("#modal-overlay");var d1=cU.querySelector("#close-button");var dU=cU.querySelector("#open-button");var d8="closed";var dd="aria-hidden";var d7="tabindex";var el="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";var dV=cU.getElementById("Modal_Title");var dt=cU.getElementById("Modal_Description");var ez=cU.getElementById("db_minmaxtemp");var dS=cU.getElementById("dt_bft");var es=cU.getElementById("dt_windspeed");var d6=cU.getElementById("dt_windirection");var eh=cU.getElementById("dt_pressure");var d2=cU.getElementById("dt_humidity");var ex=cU.getElementById("dt_visibility");var ej=cU.getElementById("dt_cloudiness");var d3=cU.getElementById("dt_sunrise");var ef=cU.getElementById("dt_sunset");var ev=cU.getElementById("dt_location");var ee=cU.getElementById("dt_moonrise");var ep=cU.getElementById("dt_moonset");var et=cU.getElementById("dt_morningold");var dW=cU.getElementById("dt_eveningold");var ea=cU.getElementById("dt_moonphases");var ek=cU.getElementById("dt_builtby");var ei=dG;ei+=bI+ax;ei+=a5;ei+=aW;ei+=af;ei+=df;var eu=dG;eu+=dK+bX;eu+=a5;eu+=aW;eu+=D;eu+=df;var en=dG;en+=bC+ag;en+=a5;en+=aW;en+=ay;en+=df;var eo=dG;eo+=dF+cd;eo+=a5;eo+=aW;eo+=dq;eo+=df;var d0=dG;d0+=ap+dI;d0+=a5;d0+=aW;d0+=aJ;d0+=df;var d5=dG;d5+=aV+au;d5+=a5;d5+=aW;d5+=bE;d5+=df;var ec=dG;ec+=de+co;ec+=a5;ec+=aW;ec+=d;ec+=df;var dZ=dG;dZ+=cT+"overcastDay"+cE+bJ;dZ+=a5;dZ+=aW;dZ+=bg;dZ+=df;var dX=dG;dX+=a8+bq;dX+=a5;dX+=aW;dX+=T;dX+=df;var eA=dG;eA+=dD+bh;eA+=a5;eA+=aW;eA+=q;eA+=df;var ew=dG;ew+=aw+dJ;ew+=a5;ew+=aW;ew+=cB;ew+=df;var em=dG;em+=aG+bW;em+=a5;em+=aW;em+=br;em+=df;var d9=dG;d9+=F+ah;d9+=a5;d9+=aW;d9+=H;d9+=df;var dT=dG;dT+=c0+cZ;dT+=a5;dT+=aW;dT+=r;dT+=df;var eg=dG;eg+=c0+cZ;eg+=a5;eg+=aW;eg+=U;eg+=df;var er=dG;er+=I+L;er+=a5;er+=aW;er+='<svg class="moonPhases" role="img" width="100%"><use xlink:href="#moon_phases"/></svg>';er+=dL;er+=df;var ed=dG;ed+=bM+bw;ed+=a5;ed+=aW;ed+=b3;ed+=df;dV.innerHTML=Q;dt.innerHTML=bH;ez.innerHTML=ei;dS.innerHTML=eu;es.innerHTML=en;d6.innerHTML=eo;eh.innerHTML=d0;d2.innerHTML=d5;ex.innerHTML=ec;ej.innerHTML=dZ;d3.innerHTML=dX;ef.innerHTML=eA;ev.innerHTML=ew;ee.innerHTML=em;ep.innerHTML=d9;et.innerHTML=dT;dW.innerHTML=eg;ea.innerHTML=er;ek.innerHTML=ed;dU.setAttribute("title",bH);var dY=function(){d4.querySelector(el).focus();eb.classList.remove(d8);d4.classList.remove(d8);var eB=a7.querySelectorAll(el);eB.forEach(function(eC){return eC.setAttribute(d7,"-1")});d4.removeAttribute(dd);a7.setAttribute(dd,"true")};var eq=function(){eb.classList.add(d8);d4.classList.add(d8);var eB=a7.querySelectorAll(el);eB.forEach(function(eC){return eC.removeAttribute(d7)});d4.setAttribute(dd,"true");a7.removeAttribute(dd);dU.focus()};dU.addEventListener("click",function(){dY()});cU.addEventListener("keyup",function(eB){if(eB.keyCode===27&&d4.classList.contains(d8)!==true){eq()}});[eb,d1].forEach(function(eB){eB.addEventListener("click",function(){eq()})})}function cA(){if(aR){bL.trace("Tracing setLayers")}var dT="#details, #beaufort, #open-button";var dd=a7.querySelectorAll(dT);var dt="visible";var dS=cU.querySelector("#modal");dd.forEach(function(dU){return dU.classList.add(dt)})}function b4(eb){if(aR){bL.trace("Tracing wd_tempScale")}var dX,dY,ea,dV,dT;dX=Number(eb.main.temp.toFixed(1));ea=dX;dV=(dX-32)*5/9;dT=dX-273.15;switch(al){case"metric":dY=ea;break;case"imperial":dY=dV;break;default:dY=dT}var d6=new Object();d6={range00:(dY>=40.1),range01:(dY>=30.1&&dY<=40),range02:(dY>=25.1&&dY<=30),range03:(dY>=20.1&&dY<=25),range04:(dY>=15.1&&dY<=20),range05:(dY>=10.1&&dY<=15),range06:(dY>=5.1&&dY<=10),range07:(dY>=0&&dY<=5),range08:(dY>=-5&&dY<=-0.1),range09:(dY>=-10&&dY<=-5.1),range10:(dY>=-15&&dY<=-10.1),range11:(dY>=-20&&dY<=-15.1),range12:(dY>=-30&&dY<=-20.1),range13:(dY>=-40&&dY<=-30.1),range14:(dY<=-40.1)};var d9=d6.range00,d8=d6.range01,d7=d6.range02,d5=d6.range03,d4=d6.range04,d3=d6.range05,d2=d6.range06,d1=d6.range07,d0=d6.range08,dZ=d6.range09,dW=d6.range10,dU=d6.range11,dS=d6.range12,dt=d6.range13,dd=d6.range14;if(d9){cD="rgb(43, 0, 1)"}if(d8){cD="rgb(107,  21,  39)"}if(d7){cD="rgb(195,  65, 114)"}if(d5){cD="rgb(231, 121,  97)"}if(d4){cD="rgb(236, 171,  77)"}if(d3){cD="rgb(237, 218,  69)"}if(d2){cD="rgb(195, 230,  77)"}if(d1){cD="rgb( 89, 188, 160)"}if(d0){cD="rgb( 77, 132, 203)"}if(dZ){cD="rgb( 99,  92, 183)"}if(dW){cD="rgb( 54,  42, 118)"}if(dU){cD="rgb(154,  29, 154)"}if(dS){cD="rgb(255, 177, 255)"}if(dt){cD="rgb(239, 239, 239)"}if(dd){cD="rgb(0, 8, 101)"}if(aO){bL.groupCollapsed(cL+"wd_tempScale"+a1,bZ);bL.debug("RunOnce: "+bO+G+"tempNow: "+dX+G+"Metric: "+ea+"°C\nImperial: "+dV+"°F\nDefault: "+dT+"°K\ntempClr: "+cD+E);bL.groupEnd()}}function b(eg){if(aR){bL.trace("Tracing wd_sunPosition")}var d9,d4,d2,dT,ef,dt,d5,d6,dZ,dU,d8,d3,d7,dS,d1,dW,ea,dd,dX,dY,dV,eb,ee,d0,ed,ec;d9=new Date(eg.sys.sunrise*1000);d2=new Date();d4=new Date(eg.sys.sunset*1000);dT=d9.getHours();d5=d2.getHours();dU=d4.getHours();ef=d9.getMinutes();dt=ef<10?"0"+ef:ef;d6=d2.getMinutes();dZ=d6<10?"0"+d6:d6;d8=d4.getMinutes();d3=d8<10?"0"+d8:d8;d7=dT+"."+dt;dS=d5+"."+dZ;d1=dU+"."+d3;dW=d1-dS;ea=d1-d7;dX=dW.toFixed(2)/ea.toFixed(2)*100;dY=dX>100?99.99:dX;dV=(24-ea)*60;eb=100-Number(eg.clouds.all);ee=dW>=0;d0=eg.main.pressure;ed=d0/10;ec=":root{";ec+="--hPa:"+ed+"deg;";ec+="--windeg:"+eg.wind.deg+"deg;";ec+="--sunPosition:"+dY.toFixed(2)+"%;";ec+="--moontime:"+dV+"s;";ec+="--tempClr:"+cD+";";ec+="--bftclr:var(--bf"+b9+");";ec+="--bftSpeed:"+aN+"s;";ec+="--windspeed-s:"+ad+"s;";ec+="--windspeed-m:"+aj+"s;";ec+="--windspeed-f:"+aq+"s;";ec+="--moonBright:"+eb+"%;";ec+="}";c7.innerHTML=ec;if(aO){bL.groupCollapsed(cL+"wd_sunPosition"+a1,bZ);bL.debug("RunOnce: "+bO+G+"sunUpRaw: "+d9+G+"sunNowRaw: "+d2+G+"sunDownRaw: "+d4+G+"sunUp: "+d7+G+"sunNow: "+dS+G+"sunDown: "+d1+G+"sunLeft: "+d1+" - "+dS+" = "+dW.toFixed(2)+G+"sunHours: "+d1+" - "+d7+" = "+ea.toFixed(2)+G+"sunPosition: "+dW.toFixed(2)+" / "+ea.toFixed(2)+" * 100 = "+dY.toFixed(2)+G+"moonHours: (24 - "+ea+")  * 60 = "+dV+E);bL.groupEnd()}}function B(dt){if(aR){bL.trace("Tracing wd_updatedTime")}(function(d0){const dX=1;const d2=60;const dZ=3600;const d4=86400;const d1=2629746;const d3=31556952;const dY=315569520;d0.timeAgo=function(d8){var d7=new Date();var eb=Math.round((d7-d8)/1000);var ea="";var d6=0;var d5=false;var d9;switch(true){case eb<=0:return p;break;case eb<d2:d6=Math.round(eb/dX);ea=cS;d5=d6>1;d9=j;break;case eb<dZ:d6=Math.round(eb/d2);ea=bA;d5=d6>1;d9=j;break;case eb<d4:d6=Math.round(eb/dZ);ea=bo;d5=d6>1;d9=bf;break;case eb<d1:d6=Math.round(eb/d4);ea=c1;d5=d6>1;d9=bf;break;case eb<d3:d6=Math.round(eb/d1);ea=i;d5=d6>1;d9="";break;case eb<dY:d6=Math.round(eb/d3);ea=O;d5=d6>1;d9="";break;default:d6=Math.round(eb/d3);ea=O;d5=d6>1;d9=""}var ec="";if(d6){ec+=d6+" "}ec+=ea;if(d5){ec+=d9}ec+=W;return ec}})(window);var dW=new Date(dt.dt*1000);var dS=dW.toLocaleTimeString(Z);var dV=timeAgo(dW);var dd=dW.getHours()<10?"0"+dW.getHours():dW.getHours();var dU=dW.getMinutes();var dT=ch;dT+=ar;dT+=dS;dT+=by;dT+=dV;dT+=cw;bQ.innerHTML=dT;bQ.setAttribute("title",b6+dS);if(aO){bL.groupCollapsed(cL+"wd_updatedTime"+a1,bZ);bL.debug("RunOnce: "+bO+G+"data.dt: "+dt.dt+G+"toISOString: "+new Date(dt.dt*1000).toISOString()+G+"toLocaleTimeString: "+new Date(dt.dt*1000).toLocaleTimeString(Z)+G+"timeAgo: "+timeAgo(dW)+E);bL.groupEnd()}}function dv(){if(aR){bL.trace("Tracing wd_docClasses")}var dU=c6.weather[0];var dT=dU.id;var dS=cU.querySelector("body");dp=Number(c6.sys.sunset);k=Number(c6.sys.sunrise);a0();var dd=[dS,a,cb];var dt=be?"nightmode":"daymode";dd.forEach(function(dV){return dV.className=dt});an?ab.className="s"+dT:ab.classList.remove();aK?cF.className="d"+dT:cF.classList.remove();bs?cF.className="r"+dT:cF.classList.remove();dk?n.className="c"+dT:n.classList.remove();u?dg.className="m"+dT:dg.classList.remove()}function Y(dS){if(aR){bL.trace("Tracing getWindDirection")}var dd=[348.75,326.25,303.75,281.25,258.75,236.25,213.75,191.25,168.75,146.25,123.75,101.25,78.75,56.25,33.75,11.25,0];for(var dt=0;dt<dd.length;dt++){if(dS>dd[dt]){return bd[dt]}}return"__"}function cn(){if(c6){if(aR){bL.trace("Tracing setLayers")}var dV=c6.weather[0];var dT=dV.id;dp=Number(c6.sys.sunset);k=Number(c6.sys.sunrise);a0();var dY="block";var dW="none";var dX=(dT>=300&&dT<=321);var dZ=(dT>=500&&dT<=531);var d1=(dT>=600&&dT<=622);var dt=(dT>=800&&dT<=803);var dd=(dT>=801&&dT<=804);var dS=(dT==800||(aa&&!be));var dU=(dT==(800||801)&&be);var d0=(dT==701||dT==711||dT==721||dT==741);aK=dX;bs=dZ;cF.style.display=bs||aK?dY:dW;cF.style.opacity=be||S?0.75:1;cb.style.display=bs||aK?dY:dW;cb.style.opacity=be||S?0.5:0.75;an=d1;ab.style.display=an?dY:dW;ab.style.opacity=be?0.1:0.75;aa=dt;dk=dd;n.style.display=dk?dY:dW;n.style.opacity=be?0.75:1;g=dS;cz.style.display=g?dY:dW;bK=dU;u=d0;dg.style.display=u?dY:dW;dg.style.opacity=be?0.75:0.85;if(be&&u){bK=true}du.style.display=bK||S||m?dY:dW;du.style.opacity=S||m?0.2:1;cP.style.display=bK?dY:dW;ae.style.display=be?dY:dW;dv();if(aO){bL.groupCollapsed(cL+"setLayers"+a1,bZ);bL.debug("RunOnce: "+bO+G+"WeatherID: "+dT+G+"condition: "+G+"  isDrizzle: "+aK+G+"  isRainy: "+bs+G+"  isSnowy: "+an+G+"  isClear: "+aa+G+"  isCloudy: "+dk+G+"  isSunny: "+g+G+"  isClearNight: "+bK+G+"  isMisty: "+u+G+"weather.description: "+dV.description+E);bL.groupEnd()}}}function a0(){if(aR){bL.trace("Tracing checkForSunset")}var dU=cg.getTime()/1000;var dS=be;var dt=new Date(k*1000);var dd=new Date(dp*1000);be=dU>=dp+1740||dU+900<=k;S=dU-dp<1740&&dU-(dp-dd.getSeconds()-1)>=0;m=k-dU<900&&k-(dU+dt.getSeconds()+1)>=0;if(be!==dS){if(be){a.style.background="#121212 linear-gradient(to bottom left, #121212 10%,#333955 100%)"}else{a.style.background="#87ceeb linear-gradient(to bottom left, #87ceeb 0%,#ccc 100%)"}a.style.color=be?"#fff":"#333";a.style.textShadow=be?"1px 1px 1px black":"2px 2px 4px white"}var dT=c6.weather[0];if(be&&dT.icon.substring(2,3)==="d"){dT.icon=dT.icon.substring(0,2)+"n"}if(!be&&dT.icon.substring(2,3)==="n"){dT.icon=dT.icon.substring(0,2)+"d"}s.className="weather i"+dT.icon;s.innerHTML=aQ+aB+dT.icon+cE;if(aO){bL.groupCollapsed(cL+"checkForSunset"+a1,bZ);bL.debug("RunOnce: "+bO+G+"nowtime: "+dU+G+"sunsettime: "+dp+G+"sunrisetime: "+k+G+"isDark: "+be+G+"isDusk: "+S+G+"isDawn: "+m+E);bL.groupEnd()}}function dm(dt,dd){if(aR){bL.trace("Tracing randRange")}return Math.floor(Math.random()*(dd-dt+1))+dt}})();(function(){var b={},e=document,d,c,a,f;c=e.getElementById("gps");a=e.getElementById("forecast");f=e.getElementById("rain");b.clean=function(j){var k,h,g=j.childNodes.length;if(g===0){return}for(h=g;h>0;h-=1){k=j.childNodes[h-1];if(k.nodeType===8||(k.nodeType===3&&!/\S/.test(k.nodeValue))){j.removeChild(k)}}};setTimeout(function(){b.clean(c);b.clean(a);b.clean(f)},2000)})();